 
 
 1 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Раздел 6. Совместная работа с другими 
приложениями  
6.1 Экспорт данных через DDE-сервер  ................................ ............................  2 
6.2 Использование ODBC для экспорта информации  ................................ ........  7 
6.3 Экспорт инструментов по ODBC  ................................ ................................  11 
6.4 Особенности при экспорте информации  ................................ ....................  12 
6.5 Экспорт данных  в системы технического анализа встроенными средствами  12 
6.6 Настройка программы Wealth -Lab Developer  ................................ ..............  16 
6.7 Настройка программы AmiBroker  ................................ ..............................  22 
6.8 Экспорт данных в системы технического анализа с использованием внешних 
программ  ................................ ................................ ................................ ....... 25 
6.9 Импорт транзакций  ................................ ................................ .................  27 
6.10  Импорт транзакций через API ................................ ................................ ... 42 
6.11  ПРИЛОЖЕНИ Е ................................ ................................ .........................  63 
 
В этом разделе  изложены  возможности  системы  QUIK по взаимодействию  с другими  
програ ммами  в режиме  online , порядок  экспорта  информации  в другие  Windows -приложения  
(MS Excel, ODBC , Wealth -Lab Developer , AmiBroker ), а также  использование  механизма  
импорта  транзакций  из файла . 
 

 
 
 2 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.1 Экспорт данных через DDE-сервер 
Кнопка 
  
6.1.1  Назначение  
Передача данных из таблиц системы QUIK во внешние программы, например, в Microsoft 
Excel. Экспорт осуществляется в формате XLTABLE  через метод обмена данными DDE.  
Обращаем внимание, что при использовании фильтрации в таблицах  
некорр ектно экспортируются данные  через DDE-сервер  из таблиц, в которых 
возмо жны вставки -удалени я строк в начало и середину таблицы (например, 
Таблицы позиций по деньгам и инструментам ). 
 
6.1.2  Использование  
1. Перед тем, как настраивать экспорт данных, необходимо настро ить DDE-сервер. При 
выводе данных в MS Excel необходимо предварительно открыть программу и загрузить в 
нее файл, в который будет осуществляться передача данных  (если настройка «Запу скать 
приложение DDE сервера автоматически» не включена) . 
 
2. Функция экспорт а данных из активной таблицы может быть вызвана одним из  следующих 
способов:  
— нажатием кнопки 
  на панели инструментов;  
— выбором пункта меню Действия /Выв од через  DDE–сервер …; 
— нажатием клавиш « Ctrl»+«L»; 

 
 
 3 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — выбором пункта контекстного меню «Вывод через DDE–сервер …». 
3. Назначение полей окна настройки экспорта «Вывод через DDE–сервер …»: 
Поле  Значение  
Название таблицы  Название таблицы QUIK, являющейся источником данных  
DDE сервер  Наименование DDE -сервера. Нажатием кнопки «По умолчанию» 
возвращается зн ачение «excel»  
Рабочая книга  Наименование файла, в который будет выведена информация 
из таблицы . Кнопка «…» справа позволяет указать 
существующий файл, расположенный на диске, и путь до него. 
Если выбран DDE-сервер « excel», то файл рабочей книги 
должен имет ь расширение . xls или .xlsx 
Лист Наименование листа, на который будет перенесена информация 
из таблицы  
Запускать приложение DDE 
сервера автомат ически  Активизировать функцию автоматического открытия выбранной 
рабочей книги в  MS Excel при старте экспорта. Флажок активен, 
если в качестве DDE-сервера выбран «excel».  Поля «Рабочая 
книга» и «Лист» м огут быть не  заполнены  
Верхний левый угол: 
 Ряд 
 Колонка  Координаты начальной ячейки для передачи данных : 
 Номер строки, считая сверху  
 Номер  колонки, считая сл ева 
Выводить таблицу, начиная со 
строки  Выводить строки таблицы, начиная с заданного номера. Может 
применяться для с окращения времени повторного вывода 
таблиц, например Таблицы обезличенных  сделок  
Вывод после созд ания Активизировать функцию экспорта данн ых сразу после загрузки 
файла с  конф игурацией таблиц, например, при открытии QUIK  
Вывод при  нажатии Ctrl+Shift+L  При установленном флажке экспорт из таблицы может быть 
активизирован н ажатием приведенной комбинации клавиш  
С заголовками строк  Выводить в ка честве первой колонки заголовки строк таблицы 
QUIK 
С заголовками стол бцов Выводить в качестве первой строки заголовки столбцов 
таблицы QUIK  
Формальные заголо вки Выводить в качестве заголовков их системные (служебные) 
наименования. М ожет использоваться дл я удобства 
программирования  
Выводить пустые ячейки вместо 
нулей Оставлять пустыми (не заполнять числовыми значениями) 
ячейки, содержащие н улевые значения. Данное свойство 
полезно при графическом отображении рядов данных 
средствами MS Excel, для предотвращ ения «провалов» линий 
графика в местах, где  данные отсутствуют (не были получены с 
сервера)  
 

 
 
 4 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 4. Нажатие кнопки «Начать вывод» приводит к старту динамического вывода данных 
из таблицы.  При нажатии с установленным  флагом «Запускать приложение DDE серв ера 
автом атически» осуществля ется попытка запустить MS Excel и загрузить в него 
указанную книгу и лист.  Если MS Excel не запущен, то имя книги должно быть указано 
с полным путем к  существующему файлу,  либо поле «Рабочая книга» должно быть 
не заполнено.  
В MS Excel имена созданных, но еще не сохранённых книг задаются без расширения, 
например, «Книга1». Если в качестве рабочей книги указано имя без расширения, 
то сначала будет выполнена попытка найти такую книгу среди уже открытых в MS Excel, 
а если она не  найдена, то создать новую книгу. При этом совпадение имен и с указа нным 
в поле «Рабочая книга» не гарантируется.  
Если имя книги не указано, то при запуск е MS Excel в нем будет создана новая книга . 
Если не  указано имя листа, то в книг е сначала ищется лист с названием эк спортиру емой 
таблицы (например, «Таблица заявок #2»), а если он не найден, то добавляется н овый 
лист с таким названием . При запуске экспорта  в MS Excel из других таблиц без указания 
имени рабочей книги, будет использоваться эта же раб очая книга.  
Если в по ле «Рабочая книга» указа но имя файла без полного пути до него, то происх одит 
поиск файла  в текущем рабочем каталоге . При неудачной попытке  системой выд ается 
сообщение  об ошибке . 
5. Нажатием кнопки «Остановить вывод» вывод данных из таблицы останавливается.  
6. Кнопка «Вывести сейчас» предназначена для разового вывода данных.  
7. Нажатием кнопки «Закрыть» производится закрытие окна настройки экспорта 
с сохранением произведенных настроек. Если процесс экспорта начат, он будет 
осуществлят ься автоматически в фоновом режим е. 
8. Нажатие кнопки «Отменить» закрывает окно без сохранения настроек.  
9. Нажатие кнопки «Справка» вызывает справку по данной функции.  
1. Когда в MS Excel открыто любое окно для редактирования настроек, 
данные в его таблицы не поступают, а накапливаются в буфере D DE. 
В случае длительной зан ятости Excel передача данных может быть 
прервана. Время ожидания до  разрыва DDE -соединения (занятости MS 
Excel) регулируется настройками экспорта.  
2. Каждая таблица обладает собственными настройками экспорта данных, 
поэтому разные т аблицы могут экспортировать данные в разные DDE-
сервера, файлы, ли сты или ячейки MS Excel.  
3. Из одной таблицы QUIK возможен экспорт данных только в один DDE-
сервер.  
4. В один DDE-сервер можно экспортировать данные из разных таблиц QUIK. 
Напр имер, в разные ячейк и одного листа MS Excel  можно выводить данные 
из разных таблиц QUIK . 
5. При изменении  формата таблицы экспорт данных останавливается и на 
экран выводится окно настройки экспорта для установки новых параметров 
для вывода да нных.  
6. При выводе данных через DDE не рекомендуется использовать фильтр 
в таблицах, предназначенных для экспорта. Если в настройках таблицы 

 
 
 5 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 имеется признак «Пок азывать нулевые значения», то его рекомендуется 
включить.  
7. Вывод данных через DDE происходит в соответствии с сортировкой  строк 
таблицы  по умолчанию, а текущая сортировка, используемая  в таблице , 
не учитывается . 
 
6.1.3  Настройки вывода по DDE 
меню Система  / Настройки / Основные  настройки …, раздел «Программа» / «Экспорт данных»  
Настройки 1 -3 служат для управления интервалом ожидания при занятост и DDE-сервера.  
1. «Время ожидания подтверждения приема данных от DDE-сервера»:  
— «При выдаче целиком таблицы, секунд (1 -3600)» – управляет временем 
ожидания при первоначальной передаче данных, рекомендуемое значение – 20. 
— «При выдаче очередной строки (1 -600)» – предназначена для управления 
интерв алом ожидания во время обновления данных, рекомендуемое значение – 
5. 
2. «Количество попыток продолжить экспорт при возникновении ошибки»  – количество 
попыток восстановить соединение в случае возникновения ошибки передачи. Значение 
по умолчанию – 0. 
3. «Новый поток на отдельный DDE-сервер»  – включает многопоточный экспорт данных 
на разные DDE-сервера. Состояние по умолчанию – выключено.  
4. «MS Excel» – поддержка локализованных версий MS Excel для разных языков. 
По умолчанию выбран  английский язык. Если используется русскоязычный MS Excel, 
то можно использовать значения «Английский» или «Русский».  
Для предотвращения разрывов в передаче  данных, вызванных занят остью 
DDE-сервера (например, при настройке формул в таблице MS Excel ) можно  
увеличить второй параметр, например, до 30 -40 секунд.  
 
6.1.4  Рекомендации  
1. Для однократного вывода данных в DDE-сервер можно использовать в таблицах QUIK 
операцию копирования данных (пункт контекстного меню « Создать копию », или нажатие 
клавиш «Ctrl»+«C»). Затем достаточно переключиться в MS Excel и вставить данные 
(меню Правка/Вставить , или нажатием клавиш «Ctrl»+«V»).  
2. Если для обработки экспортируемых данных нужно провести настройки DDE-сервера, 
воспользуйтесь для начала функцией «Вывести сейчас». Таким образом,  данные 
передадутся однократно и будут доступны для проведения настроек, и не произойдет 
переполнения буфера DDE и разрыва экспорта. После проведения настроек можно 
устан овить динамический вывод данных нажатием кнопки «Начать вывод».  
3. Если вывод данных в DDE-сервера оказался прерван сразу из нескольких таблиц 
и восстановить его вручную затруднительно, можно загрузить из файла сохраненную 

 
 
 6 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 конфигурацию таблиц с настройками экспорта (в них должен быть включен флажок 
«Выв одить после создания»). Экспорт восстанов ится автоматически.  
4. Система QUIK позволяет создавать неограниченное число таблиц одинакового типа. 
Поэтому для удобства работы с экспортом данных можно создать на экране отдел ьную 
вкладку , например «Для экспорта», и сложить в нее все таблицы -источники данн ых. Тем 
самым, (1) эти таблицы не будут занимать место на экране, (2) будет легче 
ориентироваться в  том, какие таблицы используются для экспорта, (3) в случае ра зрыва 
DDE-соединения будет проще найти таблицу с приостановленным выводом данных.  
5. Если применяе тся экспорт из нескольких таблиц, то рекомендуется установить фл ажок 
«Вывод при нажатии Ctrl+Shift+L». В этом случае можно начинать вывод данных 
из таблиц вручную, одним нажатием этой комбинации клавиш.  
6. Остановить экспорт нескольких таблиц можно командой Сервисы / Экспорт /импорт  
данных  / Остановить экспорт таблиц по DDE  ими комбинацией клавиш « Ctrl» + 
«Shift» + « S». 
6.1.5  Сообщения об ошибках  
1. «Не удалось установить DDE -соединение. Либо не запущен Excel, либо в него 
не загружен лист [Книга][Лист]».  
— Не запущен DDE-сервер либо программа MS Excel не открыта. Откройте 
програ мму и загрузите в нее требуемый файл.  
— Неправильно указано название Рабочей книги (файла) MS Excel, или ее листа . 
— В поле «Рабочая книга» необходимо указывать имя файла в точном соответствии 
с его наи менованием в MS Excel. Если файл был ранее сохранен, то он имеет 
расширение и название указывается вместе с ним, например quikexp.xls. Если 
рабочая книга MS Excel еще не была сохранена в виде файла, наименование 
не имеет ра сширения (например «Книга1») и в настройках экспорта указывается 
без него.  
— Если настройка «Запускать приложение DDE сервера автоматически» отключена, 
то в поле «Рабочая книга» указывается только название файла, путь до него 
указывать не нужно.  
— В настройках MS Excel (пункт меню Сервис / Па раметры , вкладка «Общие») 
включен флажок «Игнорировать DDE-запросы от других приложений». 
Отключите его.  
2. «Исчерпано время для обмена данными: сервер слишком загружен».  
— Произошел обрыв DDE -соединения по причине занятости DDE-сервера (MS 
Excel). Если занятос ть была вызвана длительным использованием каких -либо 
окон для редактирования параметров, то их необход имо закрыть и заново начать 
динамический экспорт из окна «Вывод данных по DDE». Если обрывы вывода 
данных регулярны, увеличьте в настройках экспорта (пунк т меню 
Система/ Настройки/ Основные  настройки …, раздел «Программа» / «Экспорт 
данных» ) интервал ожидания при выводе очередной строки, н апример, до 30 -40 
секунд.  
3. «Не удалось запустить Excel» 
— На компьютере пользователя не обнар ужена установленная программа MS Excel. 
4. «Не удалось открыть книгу [Книга] в Excel, таблица [Экспортируемая таблица] » 

 
 
 7 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — Файл с указанным именем не существует по указанному пути, либо (если путь 
к нему не указан) он не найден в текущей рабочей папке.  
5. «Не удалось найти лист [Лист] в рабочей к ниге [Книга], таблица [Экспортируемая табл ица]» 
— Лист с указанным именем не существует в указанной рабочей книге.  
6.2 Использование ODBC для экспо рта информации  
Кнопка 
  
6.2.1  Назначение  
Передача данных из таблиц QUIK в другие прилож ения для их дальнейшего использов ания 
(хранения, обработки). На  основе этой функции можно осущес твить непосредственную связь 
системы QUIK с  программами, нуждающимися в операти вной биржевой информации.  
6.2.2  Использование  
ODBC источник следует создавать в программе Администратор источника 
данных  ODBC 64 -разрядн ой верси и (путь : %windir% \system32 \odbcad32.exe ). 
 
1. Перед началом настройки экспорта необходимо создать таблицу  – получатель да нных. 
Структура этой таблицы должна повторять структуру той таблицы QUIK, из которой 
экспортируются данные. Другим и словами, она должна содержать такой же перечень 
параметров, как и список заголовков столбцов таблицы QUIK. Перечень параметров 
таблиц и тип данных в них приведен в приложении к  этому разделу. В качестве примера 
приведем настройку экспорта таблицы сделок в таблицу MS Access:  
 

 
 
 8 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 2. Создав таблицу, необходимо зарегистрировать ее в качестве источника данных для ODBC 
в Панели управления Windows (меню Пуск/Настройка/Панель управления ), пункт  
«Источники данных ODBC».  
3. В системе QUIK сделать активной таблицу, из котор ой будет производиться экспорт 
данных и открыть окно настройки экспорта ODBC одним из следующих способов:  
— нажать кнопку 
  на панели инструме нтов; 
— вызвать пункт ко нтекстного меню «Вывод по ODBC»;  
— выбрать пункт меню программы Действия /Выв од по ODBC …; 
— нажать сочетание клавиш «Ctrl»+«O».  
4. В списке «Выберите имя источника данных» выберите получателя данных. Название 
соответствует тому имени, которое описано в п. 2.  
5. Если для подключения к источнику требуется авторизация пользователя, введите имя 
и пароль в соответ ствующие поля.  
6. Нажмите кнопку «Присоединиться». В «Списке доступных таблиц» появится полный 
перечень таблиц в выбранном источнике.  
 
7. Выберите таблицу, в которую будут передаваться данные. В «Списке полей таблицы» 
отобразятся поля выбранной таблицы.  
8. Настрой те соответствие между полями таблицы QUIK и полями таблицы -получателя 
последовательным выполнением следующих действий над каждым полем:  
— В «Списке параметров» выбрать поле таблицы QUIK.  
— Сопоставить ему поле из списка «Поле, соответствующее параметру». В спи ске 
отображаются поля, имеющие тип, совместимый с типом поля в таблице QUIK. 
Если искомого поля нет, см. п. 6.2.4 . «Сообщения об ошибках».  
Не обязательно настраивать соответствие между всеми полями та блиц. 
Достат очно настроить соответствие между полями, содержащими параме тры, 

 
 
 9 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 планируемые для экспорта. Соответствие между полями, отмеченными 
«звездочкой» («*»), является обязател ьным.  
 
9. Чтобы удалить соответствие между двумя полями таблиц, выберите в «Списке 
параметро в» поле таблицы QUIK и нажмите кнопку «Очистить». Чтобы удалить 
соответствие между всеми полями таблиц, нажмите кнопку «Очистить все».  
Если таблица -получатель была выбрана ошибочно, то при выборе др угой 
таблицы из «Списка доступных таблиц» сохраняется наст ройка соответствия 
между полями, имеющими одинаковое название и тип данных. Для полей 
с отлича ющимися  наименованиями или типами данных настройки соответствия 
удаляю тся. 
 
10. Назначение настроек экспорта:  
— «Чистить таблицу перед выводом»  – если флажок установлен , то перед началом 
экспорта, при смене сессии, сервера или пользователя старые данные из 
таблицы будут удалены; если флажок снят, то новые данные будут замещать 
старые по мере поступления.  
— «Формальные имена»  – если флажок установлен, то при экспорте данных  вместо 
текстовых значений параметров передаются их системные идентификаторы, 
например, вместо наименования инструмента и класса выводятся их коды 
в торговой системе, вместо перечислимых типов, таких как «направленность 
заявки» – символ ьные коды (например,  «B» – покупка, «S» – продажа).  
— «Вывод после создания»  – если флажок установлен, то экспорт данных 
начинается одновременно с загрузкой в систему QUIK конфигурации окон, 
например, при запу ске программы.  
— «Вывод при нажатии Ctrl+Shift+O»  – при установленном ф лажке экспорт из 
таблицы может быть активизирован нажатием приведенной комбинации клавиш.  
11. Нажатие кнопки «Начать вывод данных» начинает процедуру экспорта.  
При использовании экспорта данных  из Таблицы текущих  торгов убедитесь, 
что в  настро йках получения ин формации (меню  
Система/ Настройки/Основные  настройки …, раздел «Программа» / 
«Сохранение данных») выбрано  значение «Данные, отражающие текущее 
состояние и всю историю измен ений».  
 
12. Нажатие кнопки «Прекратить» останавливает экспорт данных.  
13. Нажатие кнопки «Ок» приводит к закрытию окна настройки экспорта, при этом все 
сделанные изменения сохраняются. Если процесс экспорта начат, он будет 
осуществлят ься автоматически в фоновом режиме.  
14. Нажатием кнопки «Отмена» закрывается окно настройки экспорта без сохранения 
изменений.  

 
 
 10 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.2.3  Рекомендации  
1. Не используйте для названия полей таблиц зарезервированные слова, например, 
«money», «group», «order», «number», «date» и т.п.  
2. Не используйте пробелы в именах таблиц, полей таблиц и путей к таблицам.  
3. Для экспорта из таблиц QUIK, содержа щих параметры с символом «звездочка» («*»), 
рекомендуется устанавливать флажок «Чистить таблицу перед выводом». Тем самым из 
таблицы удаляются данные, относящиеся к предыдущим сеансам связи с сервером.  
4. Если требуется накапливать в базе данных архив информа ции, получаемой из QUIK, 
то рекомендуется сделать две таблицы одинаковой структуры. Одну из них использ овать 
для получения данных из QUIK, вторую – для накопления архива, причем копир ование 
данных в  архив осуществлять по окончании торговой сессии, либо пер ед началом 
следующей. Таким образом можно избежать повторной записи данных, например, при 
необходимости перезаказать данные заново в системе QUIK.  
5. Данные из одной таблицы QUIK могут экспортироваться только в одну таблицу -
получатель. Однако, можно настроить  в системе QUIK две или более одинаковые 
таблицы для вывода в  разные приложения.  
6. Если экспорт данных используется постоянно, установите в настройках экспорта фл ажок 
«Вывод после создания». В этом случае процедура экспорта будет начинаться 
автоматически с з апуском программы.  
7. Если для экспорта данных используется несколько таблиц, то для удобства пользов ания 
рекомендуется сделать отдельную вкладку и поместить в ней таблицы, испол ьзуемые 
только для экспорта. Тем самым достигается независимость настройки экспор та данных 
от возможных изменений в аналогичной таблице, используемой для просмотра рыночной 
информации.  
8. Если применяется экспорт из нескольких таблиц, то рекомендуется установить флажок 
«Вывод при нажатии Ctrl+Shift+O». В этом случае можно начинать вывод д анных 
из таблиц вручную, одним нажатием этой комбинации клавиш.  
9. Если в базе данных используется индексация таблиц по ключевому полю, то для 
обеспечения уникальности, его следует настраивать по полям QUIK «Номер заявки» 
и «Код класса».  
10. Если в настройках таб лицы имеется признак «Показывать нулевые значения», то его 
рекомендуется включить.  
6.2.4  Сообщения об ошибках  
1. «Ошибка синтаксиса при выполнении операции INSERT INTO».  
Наиболее распространенная ошибка, вызванная несоблюдением рекомендаций 1 и 2.  
2. «Ошибка при уста новлении соединения. Недостаточно сведений для подключения 
к DSN».  
Не настроен источник данных ODBC или настроен неправильно. Обратитесь к п. 6.2.2 . 
3. Получатель данных не указан в списке источников данных.  
— Таблица не заре гистрирована в источниках данных ODBC. Обратитесь к п. 6.2.2  
подпункт 2.  

 
 
 11 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — При сопоставлении полей таблиц отсутствует искомое наименование в списке 
«Поле, соответствующее параметру», хотя оно обозначено в «Списке полей 
таблицы».  
— Поле в таблице -получателе данных имеет тип, несовместимый с типом поля 
таблицы QUIK. Приведите тип поля в таблице -получателе в соответствие с его 
аналогом в  таблице QUIK.  
6.3 Экспорт инструментов по ODBC  
меню Сервисы / Экспорт /импорт  данных  / Экспорт ин струментов по ODBC … 
6.3.1  Назначение  
Экспорт очередей заявок по инструментам (т.н. «стаканов котировок») через ODBC без 
необх одимости создания Таблиц котировок по ним.  
6.3.2  Использование  
 
1. Настройте  список инструментов для экспорта, сформировав список «Выбранные 
инструменты» из числа доступных.  
2. Настройте  список экспортируемых параметров, нажав кнопку «Настроить». Порядок 
настройки параметров аналогичен описанию в п. 6.2.2. 
3. Для начала экспорта нажмите кнопку «Запустить». Для прекраще ния экспорта нажмите 
кнопку «Остановить».  
Нажатием кнопки «Да» окно н астройки экспорта закрывается с сохранением всех 
параметров. Чтобы закрыть окно без сохр анения настроек, нажмите кнопку «Отмена».  
1. Экспорт разр еженного стакана котировок  по DDE осуществляе тся 
в неразр еженном в иде. 
2. При экспорте точность полей  типа  float  таблиц ы базы данных не должна 
превышать значения  6. 
 

 
 
 12 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.4 Особенности при экспорте  информации  
При экспорте информации по DDE и ODBC для таблиц, работающих в режиме «drag -and-
drop» существуют ряд о собенностей:  
1. При перемещении или удалении столбцов с помощью режима «drag -and-drop» (пункт 
меню Система/ Настройки/Основные  настройки …, раздел «Таблицы» / «Перемещать 
и удалять столбцы таблицы с  помощью drag -and-drop») в таблицах с настроенным 
экспортом по DDE и  ODBC, происходит перезагрузка настроек экспорта и открывается 
соответствующий диалог с настройками.  
2. В случае изменения пользовательских фильтров в таблице происходит перезагрузка 
настроек экспорта по DDE и ODBC и открывается соответствующий диалог с настройками.  
3. В Таблице текущих торгов , а также в таблицах «Таблица информации по  опционам», 
«Купить/Продать» возможно удаление и изменение порядка строк при  помощи  режима 
«drag -n-drop».  Для таблицы «Доска опционов»  в этом режиме возможно только удаление 
строк. При выполнении данных операций происходит перезагрузка настроек экспорта 
и открывается соответствующий диалог с настро йками.  
6.5 Экспорт данных в системы технического 
анализа встроенными средствами  
меню Сервисы / Экспорт /импорт  данных / Экспорт в системы  тех. анализа … 
6.5.1  Назначение  
Использование получаемых системой QUIK данных для оперативного технического анализа 
в профессиональных приложениях  Wealth -Lab Developer  верси и 6.x и AmiBroker  версии 6.x. 
6.5.2  Использование  
Функция экспорта данных встроенными средствами  возможна, если доступен пункт меню 
Сервисы  / Экспорт /импорт  данных  / Экспорт в системы  тех. анализа …. 
Для обеспечения корректной работы пакетов технического анализа требуется 
соответствующая настройка этих программ, подробнее см. п. 6.6-6.7. 
Следует учесть, что инсталляция других систем интернет -трейдинга с функцией вывода 
данных для технического анализа может пр ивести к нарушению экспорта из системы QUIK.  
1. Откройте окно настройки экспорта с помощью пункта меню Сервисы  / 
Экспорт /импорт  данных  / Экспорт в системы  тех. анализа …. 

 
 
 13 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 
 
2. Создайте список экспортируемых инструментов и их параметров. Для добавления 
инструмента в список нажмите кнопку «Добавить». Откроется диалог выбора параметров 
для экспорта.  
 
3. В списке «Доступные инструменты» в ыберите инструмент. По умолчанию они 
отсортированы в  списке в алфавитном порядке. Для удобства выбора инструментов 
с фиксированным сроком  обращения установите флажок «Сортировать по дате 
погашения».  
4. В поле «Система тех.  анализа» выберите название программы, в которую осуществл яется 
экспорт.  

 
 
 14 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 5. В поле «Обозначение в системе ТА» введите название инструмента, идентичное  
указанному в настройках ис точника данных для системы технического анализа.  
6. Выберите источник данных для экспорта. Из Таблицы обезличенных сделок возможен 
экспорт цены и объема по каждой сделке. При установленном флажке «Выв одить объем 
сделок в лотах» данные о количестве инструменто в в последней сделке будут 
соответствовать числу лотов в сделке, при снятом флажке – количеству единиц 
инструментов . Из Таблицы истории значений параметров возможен экспорт большего 
числа п араметров, например «Лучшая цена спроса» или «Лучшая цена предложен ия». 
7. Параметр «Интервал» определяет периодичность формирования «свечей» графика. 
Выбором значения «Тиковый» назначается вывод данных по каждой сделке.  
8. Параметры «Выводить с … » и «до …» определяют  начало и конец то рговой сессии. 
Регулировкой этих параметро в можно исключить сделки периода откр ытия и закрытия, 
цены которых может заметно отличаться от среднерыночной.  
9. Если установлен флажок «Не выводить данные повторно», то при разрыве связи 
с сервером и последующем восстановлении QUIK не передает заново ранее 
экспорт ированные данные. Если флажок снят, то при каждом восстановлении связи 
с сервером QUIK экспортирует все данные с начала торговой сессии. О случаях 
применения см.  п. 6.2.3  «Рекомендации».  
10. Следующие параметры определ яют количество экспортируемых данных:  
— «Все доступные значения»  – все значения, с учетом исторических данных 
за предыдущие дни, если такая возможность поддерживается сервером QUIK 
брокера; 
— «Только за текущий торговый день»  – все значения текущей торговой се ссии;  
— «С …» и «по …»  – значения в интервале указанных дат и времени.  
Настройки параметров пп. 7 -10 по умолчанию устанавливаются в  соответствии 
с общими  настройками экспорта данных (кнопка «Общие настройки» 
в диалоге экспорта данных для технического анализа ). 
 
11. Нажатием кнопки «Да» окно выбора параметров инструмента закрывается, и новый 
инструмент отображается в списке «Экспортиру емые инструменты ». 
12. Для редактирования ранее созданного инстр умента нажмите кнопку «Изменить».  
13. Для редактирования общих параметров э кспорта по нескольким инструментам выделите 
нужные инструменты в списке и нажмите на кнопку «И зменить». На экране появится 
диалог, в  котором можно изменить настройки периода экспорта данных, повторного 
вывода данных, а  также изменить множество выв одимых зн ачений.  

 
 
 15 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 
 
14. Для удаления выбранных инструментов из сп иска выделите их и нажмите на кнопку 
«Убрать».  
15. Кнопка «Общие настройки» позволяет задать п араметры , которые будут выбраны 
по умолчанию при добавлении нового инструмента для экспорта. При нажатии на кнопку 
на экране появляется ди алог следующего вида:  
— Параметр «Интервал» определяет периоди чность формирования «свечей» 
графиков для всех экспортируемых инструментов.  
— Параметры «Выводить с … » и «до …» опр еделяют начало и конец торговой 
сессии.  
— Установленный флажо к «Не выводить данные повторно» означает, что при 
разрыве связи с  сервером и последующем восстановлении QUIK не передает 
заново ранее экспортир ованные данные. Если флажок снят, то  при каждом 
восстановлении связи с сервером QUIK экспортирует все данные с на чала 
торговой сессии.  
 
— Параметры, определяющие количество экспортируемых данных (применительно 
ко всем содержащимся в списке инструментам):  
 «Все доступные значения»  – все значения, с учетом исторических данных 
за предыдущие дни, если такая возможность под держивается сервером QUIK 
Вашего брокера;  
 «Только за текущий торговый день»  – все значения текущей торговой сессии;  
 Расписание «С … по …» предназначено для настройки интервала времени, 
которому соответствуют  экспортируемые параметры. Например, если нужно 
не выводить данные о сделках, совершаемых в первую минуту торгов, то 
можно установить вывод данных не с самого начала торгов, а с указанного 
момента вр емени.  
16. При установленном флажке «Начинать вывод автоматически» экспорт данных 
начинается о дновременно с за пуском программы.  

 
 
 16 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 17. Нажатие кнопки «Начать вывод по инструменту » начинает процедуру экспорта по 
выбранн ому инструменту. Инструменты, по которым осуществляется экспорт, отличаются 
в списке символом 
 . 
18. Нажатие кнопки «Начать вывод» начинает процедуру экспорта данных по всем 
инстр ументам из списка.  
19. Нажатием кнопки «Прекратить вывод по инструменту » останавливается экспорт данных 
по выбранному в списке инструменту, нажатием кнопки «Прекратить вывод» 
прекращается вывод данных по всем инструментам в сп иске. 
При нача том экспорте данных по инструменту  невозможно удалить его из 
списка или изменить его настройки. Если требуется внести изменения, сначала 
остановите вывод данных, а затем редактируйте список экспортируемых 
инструментов . 
 
20. Нажатием кнопки «Закрыть» окно настр ойки экспорта закрывается. Если процесс 
экспорта начат, он будет осуществляться автоматически в фон овом режиме.  
6.5.3  Рекомендации  
1. В настройках экспорта данных из QUIK рекомендуется устанавливать флажок 
«Не выводить данные повторно». Если связь с сервером была п рервана и затем 
восстановл ена, экспорт данных восстановится автоматически. При этом будут переданы 
только вновь поступившие данные.  
2. Если Рабочее место  QUIK закрыт о пользователем, то экспорт данных прекращается. 
При повторном запуске системы экспорт данных начинается с начала торговой сессии . 
6.6 Настройка программы Wealth -Lab Developer  
6.6.1  Подготовка к работе  
1. Установите программу Wealth -Lab Developer.  
— Скачайте дистрибутив для установки провайдера  экспорта из QUIK в Wealth -Lab 
Developer. Его можно взять по адресу: 
https://arqatech.com/upload/iblock/855/WealthLabDataProvider.zip . 
2. Для осуществления экспорта  данных  из QUIK в программу Wealth -Lab Developer  
необходимо установить провайдер  WealthLab.DataProviders . Провайдер 
WealthLab.DataProviders  поддерживает два режима работы: разовое получение данных 
и получение данных в реальном времени.  Для использования провайдера в обоих 
режимах работы необходимо выполнить установку  следующи м образом : 
— Распакуйте присланный архив и скопируйте в директорию , где установлена 
программа Wealth -Lab Developer  следующие файлы:  
— WealthLab .DataProviders .QUIK.dll; 

 
 
 17 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — NLog.dll  и NLog.xml , если они отсутствуют в дистрибутиве Wealth -Lab 
Developer или NLog.dll имеет более ст арую верси ю (версию NLog.dll можно 
проверить в  свойствах файла) . 
— Запустите  приложение  Wealth -Lab Developer  через  пункт  меню  «Пуск» . 
3. Выполните настройку приложения Wealth -Lab Developer : 
— В главном меню приложения выберите пункт « Tools / Data manager »; 
— В окне «Data manager » выберите  команду  «Create a new DataSet» : 
 
— В открывшемся диалоге выберите список доступных провайдеров « QUIK Data» 
и нажмите на кнопку « Next»: 
 

 
 
 18 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — В списке символов укажите тикеры инструментов  (через запятую или пробел) , 
с которыми предполага ется работать, а ниже выб ерите  временной масштаб, 
который предполагается использовать (месяц, неделя, день или минутный 
интервал) и наж мите на кнопку « Next»: 
 
— Укажите имя источника данных для экспорта (например, QUIK LKOH (Minute,15) ) 
и нажмите на  кнопку «Finished »: 
 
 
Успешное добавление данных отобразится в исходном окне «Data manager »: 
 

 
 
 19 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — Созданный DataSet  появится в дереве DataSets  программы Wealth -Lab Developer : 
 
Выполнив данные настройки, пользователь сможет получать данные из системы 
QUIK в режиме р азового получения.  
— Для получения данных в режиме реального времени необходимо выполнить 
дополнительные настройки:  
— В главном меню приложения выберите пункт « Tools / Preferences »: 
 

 
 
 20 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — В открывшемся диалоге « Preferences » слева в дереве выб ерите  «Streaming 
data», а справа  в списке доступных провайдеров выберите  «QUIK» и 
добавь те необходимые для обновления в режиме реального времени тикеры 
(например, LKOH):  
 
— После запуска экспорта данных (см. п. 6.5) необходимо в  программ e Wealth -
Lab Developer нажать на кнопку « Stream » (в правом нижнем углу), после 
чего программа  начнет  получать данные из системы QUIK  в режиме 
реального времени:  
 

 
 
 21 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.6.2  Создание источника данных в QUIK  
 
1. В Рабочем месте QUIK откройте окно настройки экспорта с пом ощью пункта меню 
Сервисы  / Экспорт /импорт  данных  / Экспорт в системы  тех. анализа …. 
2. Создайте  список экспортируемых инструментов и их параметров. Для добавления 
инструмента  в список нажмите кнопку «Добавить». Откроется диалог выбора параметров 
для экспо рта. 
3. В списке «Доступные инструменты» в ыберите  инструмент, например, « ЛУКОЙЛ ». 
Выбираемый инструмент должен со впадать с инструментом , добавленным 
в приложении Wealth -Lab Developer  (описание настройки приложения 
см. в п 6.6.1 ). 
 
По умолчанию список упорядочен в алфавитном порядке, для сортировки инструментов  
с фиксированным сроком обращения предназначена опция «Сортировать по дате 
погашения».  
4. В поле «Система ТА» выберите значение « WealthLab ». 
5. В поле «Обознач ение в системе ТА» введите идентификатор инструмента в программе 
Wealth -Lab Developer . 
6. Выберите источник данных для экспорта. Из Таблицы обезличенных сделок воз можен 
экспорт цены и объема по каждой сделке. При установленном флажке «Выв одить объем 
сделок в лотах» данные о количестве инструментов  в последней сделке будут 
соответствовать числу лотов в сделке, при снятом флажке – количеству единиц 
инструментов . Из Таблицы истории значений параметров возможен экспорт большего 
числа параме тров, например «Лучшая ц ена спроса» или «Лучшая цена предложения».  

 
 
 22 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 7. В поле «Интервал» выберите интервал вывода данных в программу Wealth -Lab Developer . 
8. Выберите время начала и конца торговой сессии.  
9. Установленный флажок «Не выводить данные повторно» означает, что при разрыве 
связи  с сервером и последующем восстановлении QUIK не передает заново ранее 
экспортированные данные. Если флажок снят, то при каждом восстановлении связи 
с сервером QUIK экспортирует все данные с начала торговой сессии.  
10. Установите параметры, определяющие количе ство экспортируемых данных 
(примен ительно к выбранному инструменту).  
11. Нажатием кнопки «Да» окно выбора параметров инструмента закрывается, и новый 
инструмент отображается в списке «Экспортируемые инструменты ». 
6.7 Настройка программы AmiBroker  
6.7.1  Подготовка к рабо те 
1. Установите  программу AmiBroker . 
2. Для осуществления  экспорта из QUIK в программу AmiBroker необходим файл 
QUIK2AMIBROKER_DataPlugin.dll. Его можно взять на официальном сайте  в разделе 
«Файловый архи в». 
3. Скопируйте  файл QUIK2AMIBROKER_DataPlugin.dll в папку Plugins, расположенную 
в каталоге хранения программы AmiBroker.  
6.7.2  Создание источника данных в QUIK  
1. В QUIK откройте окно настройки экспорта с помощью пункта меню Сервисы  / 
Экспорт /импорт  данных  / Экспо рт в системы  тех. анализа …. 
2. Создайте  список экспортируемых инструментов и их параметров. Для добавления 
инструмента  в список нажмите кнопку «Добавить». Откроется диалог выбора параметров 
для экспо рта. 
 

 
 
 23 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 3. В списке «Доступные инструменты» в ыберите инструмент,  например, «Л УКОЙЛ». 
По умолчанию список упорядочен в алфавитном порядке, для сортировки инструментов  
с фиксированным сроком обращения предназначена опция «Сортировать по дате 
погашения».  
4. В поле «Система ТА» выберите значение « AmiBroker ». 
5. В поле «Обозначен ие в системе ТА» введите идентификатор инструмента в программе 
AmiBroker . 
6. Выберите источник данных для экспорта (Таблица обезличенных сделок или Таблица 
истории значений параметров).  
7. В поле «Интервал» выберете интервал вывода данных в систему AmiBroker . 
8. Выберете время начала и конца торговой сессии.  
9. Установленный флажок «Не выводить данные повторно» означает, что при разрыве 
связи с  сервером и последующем восстановлении QUIK не передает заново ранее 
экспортированные данные. Если флажок снят, то при каждом в осстановлении связи 
с сервером QUIK экспортирует все данные с начала торговой сессии.  
10. Установите параметры, определяющие количество экспортируемых данных 
(примен ительно к выбранному инструменту).  
11. Нажатием кнопки «Да» окно выбора параметров инструмента закр ывается, и новый 
инструмент отображается в списке «Экспортируемые инструменты ». 
6.7.3  Настройка импорта данных в программе AmiBroker  
1. Запустите  AmiBroker  и выберите пункт меню File / New / Database …. 
2. В появившемся  окне в поле « Database  folder » необходимо указать путь к базе данных 
для хранения импортируемой информации. Если базы данных не существует, 
то необходимо её  создать, указав путь и уникальное имя базы, а затем нажав на кнопку 
«Create ». Признак « Load this database  at startup » означает загрузку указанной баз ы 
данных по умолчанию при запуске программы.  
 
3. Далее  необходимо установить настройки импорта данных. В качестве источника данных 
в поле « Data source » нужно выбрать « QUIK Data Plug-in». 

 
 
 24 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 4. Параметр « Local Data Storage» установить в значении «Enable» (настраива ется 
по умолчанию).  
5. В поле «Number of bars» указать количество баров, отображаемых на графике.  
6. Установить интервал  импорта данных в поле « Base time interval ». 
1. Значение параметра « Base  time interval » должно соответствовать 
значению поля «Интервал» в настрой ках экспорта данных в системе QUIK  
для программы AmiBr oker (см. п. 6.9.2), в противном случае данные 
импортироваться не будут.  
2. В программе  AmiBroker есть возможность изменения интервала графика 
через ко нтекст ное меню (пункт меню «Intraday») на основе глобальной 
настройки графика в  параметрах «Database settings». После изменения 
настройки таймфрейма графика, график в Amibroker, как правило, 
не совпадает с графиком, который выгружает QUIK из -за особенностей 
форм ирования интервалов для графиков в системе QUIK. QUIK разбивает 
час на соответствующие графику интервалы (например, на 15 -минутки), 
и отображает первый бар графика с ближайшего следующего интервала . 
В программе Amibroker такого правила построения графика н ет, поэтому 
возможны несовпад ения. 
 
7. Нажать на кнопку «ОК» для сохранения настроек.  
8. После сохранения настроек станет досту пной кнопка «Configure», нажатием которой 
открывается окно «Настройки экспорта данных из Quik в Amibroker». Признаком 
«Очищать данные А миброкера после установл ения соединения» включается удаление 
всех ранее переданных данных в  AmiBroker ’е перед началом нового сеанса экспорта из 
QUIK в AmiBroker . Если флажок не установлен, то новые данные будут добавляться к 
предыдущим, т.е. будут накаплив ать ист орию котировок в AmiBroker ’е. 
 
9. Далее необходимо создать новый тикер. Выберите пункт меню Symbol/New . В 
появи вшемся окне введите название тикера, идентичное указанному при настройке 
источника данных в  системе QUIK (см. п. 6.9.2). В нашем случае туда нужно ввести 
значение « LKOH » и нажать «Enter».  
 
10. В окне « Symbols » можно увидеть список всех созданных тикеров. При выборе тикера 
в рабочей области программы AmiBroker  отображается соответствующий указанному 
тикеру график.  

 
 
 25 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 
 
11. Чтобы начать экспорт, следует  в Рабочем месте  QUIK в окне «Экспорт данных для 
технич еского анализа» нажать кнопку «Начать вывод по инструменту ». При этом 
поступающие данные должны отображаться в реальном времени в рабочей области 
программы  Amibr oker. 
 
6.8 Экспорт данных в системы технического 
анализа с использов анием внешних программ  
6.8.1  Назначение  
Использование получаемых системой QUIK данных для оперативного технического анализа 
в программе Equis MetaStock в случае, если использование встроенных  средств экспорта 
невозможно.  

 
 
 26 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.8.2  Использование  
Существует два распространенных способа экспорта информации – с использованием 
программ DDE2MS и MetaServer RT. Обе программы используют следующую схему передачи 
информации:  
• Из QUIK выводятся данные из Таблицы те кущих торгов  в Microsoft Excel, используя 
механизм DDE,  
• DDE2MS или MetaServer RT забирают обновляемые данные из Microsoft Excel и  передают 
их в MetaStock.  
QUIK → Microsoft Excel → DDE2MS или MetaServerRT → MetaStock  
Программа DDE2MS, как нам показалось, бо лее удобна в работе и настройке, является более 
предсказуемой, но, в отличие от MetaServer RT, демо -версия которого может закачивать 
данные по двум инструментам , DDE2MS может работать только с одной. Вы можете выбрать 
любой из  этих вариантов.  
6.8.3  Использование  программы DDE2MS  
1. Запустите программу DDE2MS (она поставляется в виде автономного exe -файла, 
полностью готового к работе).  
2. Заполните необходимые  для работы параметры:  
— В поле «Path» укажите полный путь к созданному источнику данных MetaStock 
(например, «C: \MetaStock Data \SBER »). 
— В поле «Symbol» укажите имя источника данных (в нашем примере это будет 
«SBER »). 
— В поле «Interval» выберите «1».  
— В поле «Server» введите «Excel».  
— В поле «Topic» определяются Книга и Лист MS Excel, из которых будут забираться 
данные, в формате вида «[имя_книги.xls]имя_листа», например: 
«[Книга1.xls]Лист1».  
— В полях «Item -Last Price» (цена последней сделки) и «Item -Volume» (количество 
инструментов  в последней сделке) введите адреса ячеек MS Excel в формате 
«RxCy», из  которых надо брать с оответствующие данные, где «x» -номер строки, 
«y»-номер столбца (цифрами).  
3. Нажмите на кнопку  «Start». Если DDE2MS найдет требуемые для работы данные, 
то появится таблица с текущими значениями OHLCV, название кнопки изменится 
на «Stop» и поля ввода станут не активными. В противном случае будет показано 
сообщение об ошибке.  
6.8.4  Использование программы MetaServer RT  
1. Запустите программу MetaServerRT.  
2. Проверьте, имеется ли созданный в MetaStock источник (в примере  – «SBER ») в списке 
доступных источников. Если этого ис точника нет, выберите пункт меню «Symbol -Add 
new» и  опишите созданный Вами источник ( SBER ). 

 
 
 27 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 3. Выберите строку таблицы, соответствующую новому источнику данных (содержащую его 
наименование в столбце «TS/MS Symbol») и двойным нажатием левой кнопки мыши 
на строке откройте окно с настройками параметров источника.  
4. В открывшемся окне выполните следующие действия:  
— в поле «Global Server/MetaStock Symbol» введите имя источника данных,  
— в поле «DDE» наберите «Excel».  
5. Перейдите на вкладку «Easy -Setup tools»:  
— в поле «Topi c» укажите книгу и лист MS Excel с данными из QUIK, в формате 
«[имя_книги.xls]имя_листа», например: «[Книга1.xls]Лист1».  
— в поле «Item» введите адрес ячейки с данными, формата «RxCy», где «x»  – 
номер строки, «y»  – номер столбца, например: «R1C1».  
6. Нажмите на  кнопки «Set».  
7. Перейдите обратно на вкладку «Tradestation/MetaStock», и поставьте все флажки 
(«галочки»). Нажмите кнопку «Ok».  
8. Нажмите на панели управления программы MetaServerRT зелёную кнопку (с подсказкой 
«Start all instruments»). Если настройки были сд еланы правильно и данные по 
инстр ументу доступны, то в строке таблицы с настраиваемым источником данных 
параметр «*» должен принять значение «+».  
6.8.5  Настройка  
Для того чтобы MetaStock правильно воспринимал дробные числа, 
в региональных настройках Windows поставьте  в качестве разделителя для 
дробных чисел «.»  (точка) , а не «,»  (запятая) , иначе данные не будут 
передаваться правильно.  
 
6.9 Импорт транзакций  
6.9.1  Универсальный формат файла импорта транзакци й 
Назначение  
Универсальный формат позволяет отправлять любые транзакции, если известно 
их описание.  
Описание набора полей транзакции можно посмотреть в окне создания кармана транзакций.  
Подробное описание окна см. п.3.50 Раздела 3 «Просмотр информации».  
Из контекстного меню заявки в таблице «Карман транзакци й» необходимо выбрать 
«Загрузить транзакции в tri-файл» . 
Формат .tr i-файла с результатами обработки транзакций  
Файл представляет собой последовательность строк, каждая из которых содержит 
информацию по отдельной транзакции.  

 
 
 28 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Принцип формирования строки:  
1. Строки TRANS_ID, CLASSCODE, ACTION, в качестве значения ACTION указывается имя 
требуемой транзакции, например: «Ввод заявки РЕПО с ЦК ». 
2. Параметры транзакции описыва ются в виде  «НАЗВ АНИЕ_ПАРАМЕТРА=значение 
параметра»  и разделяются символом «;».  
Примеры строк, которые могут содержаться в файле:  
Транзакция  Строка  
Заявка на сделку РЕПО с  ЦК 
1 день  
Покупка объема 1000000.00 
по цене 6.1500  TRANS _ID=1; CLASSCODE =EQRP _BND; ACTION =Ввод заявки РЕПО с ЦК; 
Торговый счет= L01+00000 F00; К/П=Купля; Тип=Лимитная; Тип по 
цене=По  разным ценам; Тип по остатку=Поставить в очередь; Тип 
ввода значения цены=По цене; Назначение заявки=По умолчанию; 
Режим= EQRP _BND; Инструмент= RU000A0JRF37; Цена=6.1500; Лоты=0; 
Примечание=4 F161/T2/; Объем заявки=1000000.00; Код внешнего 
пользователя=; Доп. инфо=;  
Айсберг -заявка  
На фондовом рынке 
Московской Биржи, купить 
100 лотов Аэрофлота по 
цене 70, видимое 
количество лотов в  очереди 
– 10, код клиента 467  CLASSCODE =TQBR ; TRANS _ID=2; ACTION =Ввод айсберг заявки; 
Торговый счет= S01-00000 F00; К/П=Купля;Тип=Лимитная;Тип по 
цене=по разным ценам; Тип по остатку=поставить в очередь; Тип 
ввода значения цены=По цене; Инструмент= AFLT; Цен а=70; 
Лоты=100; Видимое количество=10; Примечание=467;  
Алго-заявка типа « Айсберг» 
на покупку 99 AGZD  по цене 
111.0000 , лимитированная, 
видимое количество – 2, 
снять алго-заявку при 
снятии связанной , 
агресивность – нормальный 
режим, с  условием 
исполнения – до отмены  TRANS_ID=4;CLASSCODE=ALGO_ICEBERG;ACTION=Ввод алго -
заявки;Торговый счет=L01 -
00000F00;Фирма=NC0038900000;Направление=Покупка;Тип=Лимитиров
анная;Класс=BQUOTE;Инструмент=AGZD;Цена=111.0000;Количество=99
;Видимое количество=2;Код клиента=Q3;Комментар ий=;Снимать алго -
заявку при снятии связанной=Y;Агрессивность=Нормальный 
режим;Условие исполнения=До отмены;Дата истечения=20161125;Время 
истечения=124141;Оповещения об исполнениях=Да;  
Алго-заявка типа « VWAP » на 
покупку 5 AGZD , процентом 
исполнения для вкл ючения 
агрессивности  – 0,000000 , 
степенью агрессивности – 0 TRANS_ID=2;CLASSCODE=ALGO_VWAP;ACTION=Ввод алго -
заявки;Торговый счет=L01 -
00000F00;Фирма=NC0038900000;Направление=Покупка;Класс=BQUOTE;
Инструмент=AGZD;Количество/Объем=Количество;Объем=0;Количество
=5;Исполнение процента от рынка=Нет;Процент от рынка=0;Время 
старта=183001;Время окончания=183501;До закрытия=Нет;Тип задания 
времени старта=Текущее;Тип задания интервала=Количество 
итераций;Количество итераций=5;Время итерации=0;Отклонение от 
средневзвеса =0,000000;Код клиента=Q3;Комментарий=;Минимальная 
цена=0,000000;Максимальная цена=0,000000;Оповещения об 
исполнениях=Нет;CatchUp -заявка=Да;Процент исполнения для 
включения агрессивности=0,000000;Степень 
агрессивности=0;Использовать IOC -заявки=Да;Использова ть 
ограничение внутри итераций=Да;Работать в ценовом 
диапазоне=Нет;Профилирование по времени=Нет;Учитывать 
собственные сделки=Да;  

 
 
 29 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Транзакция  Строка  
Алго-заявка типа « TWAP » на 
покупку 222 AGZD  по цене 
150.0000  TRANS_ID=1;CLASSCODE=ALGO_TWAP;ACTION=Ввод алго -
заявки;Торговый счет=L01 -
00000F00;Фирма=NC0038900000;Направление=Покупка;Класс=BQUOTE;
Инструмент=AGZD;Количество/Объем=Количество;Объем=0.00;Количест
во=222;Тип=Лимитированная;Время старта=183003;Время 
окончания=183003;Тип задания времени старта=Текущее;Тип задания 
интерва ла=Количество итераций;Количество итераций=10;Время 
итерации=15;Тип ограничения цены=Проценты;Ограничение цены 
(проценты)=0.000000;Ограничение цены (деньги)=0.0000;Код 
клиента=Q3;Комментарий=;Оповещения об 
исполнениях=Нет;Профилирование по времени=Нет;Цена =150.0000;  
Алго-заявка типа « GTD» на 
покупку 10 LKOH  по цене 
1000.00  TRANS_ID=2;CLASSCODE=ALGO_GTD;ACTION=Ввод заявки;Торговый 
счет=L01 -
00000F00;Фирма=NC0038900000;Направление=Покупка;Класс=BQUOTE;
Инструмент=LKOH;Цена=1000.00;Количество=10;Тип=Лимитирован ная;
Код клиента=Q3;Комментарий=;Условие исполнения=До отмены;Дата 
истечения=20160912;Время истечения=162335;Оповещения об 
исполнениях=Нет;Использовать временной интервал=Нет;Время 
старта=0;Время окончания=0;Контрагент=NC0038900000;Код 
расчетов=T0;  
Снятие Алго-заявки с 
идентификатором 
000000000072ALGO_TWAP  TRANS_ID=3;CLASSCODE=ALGO_TWAP;ACTION=Снятие заявки; 
Идентификатор заявки=000000000072ALGO_TWAP  
 
6.9.2  Фиксированный формат файла импорта транзакций  
меню Сервисы / Экспорт/импорт данных  / Импорт транзакций из файла … 
Назначение  
Автоматический ввод в торговую систему подготовленных какой -либо внешней программ ой 
транзакций. Получение отчета о результате ввода транзакции.  
Использование  
Для обмена информацией между QUIK и внешней программой используются текстовые 
файлы фиксированной структуры:  
• *.tri – файл с параметрами транзакций,  
• *.tro – файл с результатами пос ылки транзакций в торговую систему,  
• *.trr – файл, содержащий журнал обработки транзакций.  
Схема взаимодействия между программами в ыглядит следующим образом:  
1. Внешняя программа формирует транзакцию с заданными параметрами и записывает 
ее в виде новой строки в .tri-файл. Транзакции идентифицируются по дополнительному 
целочисленному параметру TRANS_ID, содержащему уникальный номер.  

 
 
 30 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 2. Система QUIK опрашивает с определенной периодичностью .tri -файл с параметрами 
транзакций и передает в торговую систему ранее не обр аботанные транзакции. 
Если описание транзакции не соответствует принятому формату, то она отвергается.  
3. Результат действий записывается в .tro -файл в формате, приемлемом для чтения 
внешней программой. Каждая строка файла содержит информацию об обработке 
отдельной транзакции, различаемые по параметру TRANS_ID.  
4. При обработке внешней программой результатов операции (на Московской Бирже ), 
выводимых в  .tro-файл, регистрационный номер заявки в торговой системе указывается 
в текстовом сообщении, возвращаемом торгов ой системой (поле «DESCRIPTION»), а 
также пар аметром ORDER_NUMBER.  
Перед первым чтением .tri -файла QUIK обращается к .tro -файлу и  считывает 
обработанные заявки. Заявки, содержащиеся в .tro -файле считаются 
обработанными, и строки в .tri -файле с тем же парам етром TRANS_ID 
игнорируются. Если  внешняя программа при каждом запуске начинает 
нумеровать заявки сначала, то перед ее запуском необходимо удалить .tro -
файл из рабочей директории.  
 
Формат .tri -файла с параметрами транзакций  
Файл представляет собой последов ательность строк, каждая из которых содержит 
информацию по отдельной транзакции. Параметры транзакции описываются в виде 
«НАЗВ АНИЕ_ПАРАМЕТРА=значение_параметра» и разделяются символом «;».  
Транзакция на ввод айсберг -заявки на Московской Бирже описывается 
в особом фо рмате, приведенном в примере строк файла.  
 
Параметры и принимаемые ими значения:  
Параметр  Значение  
CLASSCODE  Код класса, по которому выполняется транзакция, например TQBR. 
Обязательный параметр  
SECCODE  Код инструмента, по которому выполняется т ранзакция, например SBER  
ACTION  Вид транзакции, имеющий одно из следующих знач ений: 
 «NEW_ORDER»  – новая заявка,  
 «NEW_NEG_DEAL»  – новая заявка на внебиржевую сделку,  
 «NEW_REPO_NEG_DEAL» – новая заявка на сделку РЕПО,  
 «NEW_EXT_REPO_NEG_DEAL»  – новая заявка на сделку 
модифицированного РЕПО (Р ЕПО-М), 
 «NEW_STOP_ORDER»  – новая стоп -заявка,  
 «KILL_ORDER»  – снять заявку,  
 «KILL_NEG_DEAL»  – снять заявку на внебиржевую сделку или 
заявку на  сделку РЕПО,  
 «KILL_STOP_ORDER»  – снять  стоп-заявку , 
 «KILL_ALL_ORDERS» – снять в се заявки из торговой системы,  
 «KILL_ALL_STOP_ORDERS» – снять  все стоп-заявки , 
 «KILL_ALL_NEG_DEALS» – снять все заявки на внебиржевые 

 
 
 31 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Значение  
сделки и заявки на сделки Р ЕПО, 
 «KILL_ALL_FUTURES_ORDERS»  – снять  все заявки  на рынке  
FORTS,  
 «MOVE_ORDERS»  – переставить з аявки на рынке FORTS,  
 «NEW_QUOTE»  – новая безадресная заявка,  
 «KILL_QUOTE»  – снять безадресную заявку,  
 «NEW_REPORT»  – новая заявка -отчет о подтверждении 
транзакций в  режимах РПС и Р ЕПО, 
 «SET_FUT_LIMIT»  – новое ограничение  по фьючерсному счету  
FIRM_ID Идентификатор участника торгов (код фирмы)  
ACCOUNT  Номер счета Трейдера . Параметр  обязател ен при «ACTION » = 
«KILL_ALL_FUTURES _ORDERS ». Параметр чувствителен к верхнему/нижнему 
регистру си мволов  
CLIENT_CODE  20-ти символьное составное поле, может содержать код  клиента и текстовый 
комментарий (поручение) с тем же разделителем, что и при вводе заявки 
вручную.  Необязательный п араметр  
TYPE Тип заявки, необязательный п араметр. Значения: «L» – лимитированная (по 
умолчанию), «M» – рыночная  
MARKET_MAKER_ORDER  Признак  того, является ли заявка заявкой Маркет -Мейкера. Возможные 
значения: «YES» или «NO». Значение по умолчанию (если параметр 
отсутствует): «NO»  
OPERATION  Направление заявки, обязательный параметр. Значения: «S» – продать, «B» 
– купить 
EXECUTION_CONDITION  Условие исполнения заявки, необязательный параметр. Возможные 
значения: 
 «PUT_IN_ QUEUE» – поставить в очередь (по умолчанию),  
 «FILL_OR_KILL» – немедленно или отклонить,  
 «KILL_BALANCE » – снять остаток  
QUANTITY  Количество лотов в заявке, обязательный параметр  
REPOVALUE  Объем сделки РЕПО -М в рублях  
START_DISCOUNT  Начальное значение дисконта в заявке на сделку РЕПО -М 
LOWER_DISCOUNT  Нижнее предельное значение дисконта в заявке на сделку РЕПО -М 
UPPER_DISCOUNT  Верхнее предельное значение дисконта в заявке на сд елку РЕПО -М 
PRICE  Цена заявки, за единицу инструмента. Обязательный параметр. При 
выставлении рыночной заявки (TYPE=M) на Срочном рынке FORTS  
необх одимо указывать значение цены – укажите наихудшую (минимально или 
максимально возможную – в зависимости от  направленности), заявка все 
равно будет исполнена по рыночной цене. Для других рынков при 
выставлении рыночной заявки укажите price=0 
STOPPRICE  Стоп-цена, за единицу инструмента. Используется тол ько при «ACTION» = 
«NEW_STOP_ORDER»  

 
 
 32 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Значение  
STOP_ORDER_KIND  Тип стоп -заявки. Возможные значения:  
 «SIMPLE_STOP_ ORDER» – стоп-лимит , 
 «CONDITION_PRICE_BY_OTHER_SEC» – с условием по другому 
инструменту , 
 «WITH_LINKED_LIMIT_ORDER» – со связанной заявкой,  
 «TAKE_PROFIT_STOP_ORDER» – тейк-профит , 
 «TAKE_PROFIT_AND_STOP_LIMIT_ORDER»  – тейк-профит  и 
стоп-лимит , 
 «ACTIVATED_BY_ORDER_SIMPLE_STOP_ORDER» – стоп-лимит  
по исполнению  заявки, 
 «ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER» – тейк-
профит  по исполнению  заявки , 
 «ACTIVATED_BY_ORDER _TAKE_PROFIT_AND_STOP_LIMIT_ORDE
R» – тейк-профит  и стоп-лимит  по исполнению  заявки  
Если параметр пропущен, то считается, что заявка имеет тип «стоп -лимит»  
STOPPRICE_CLASSCODE  Класс инструмента условия. Используется только при «STOP_ORDER_KIND» 
= «CONDITION_PRICE_BY_OTHER_SEC»  
STOPPRICE_SECCODE  Код инструмент а условия. Используется только при «STOP_ORDER_KIND» = 
«CONDITION_PRICE_BY_OTHER_SEC»  
STOPPRICE_CONDITION  Направление предельного изменения стоп -цены. Используется  только  при 
«STOP_ORDER_KIND» = «CONDITION_PRICE_BY_OTHER_SEC». Возможные 
значения: «<=» или  «>=»  
LINKED_ORDER_PRICE  Цена связанной лимитированной заявки. Используется только при 
«STOP_ORDER_KIND» = «WITH_LINKED_LIMIT_ORDER»  
EXPIRY_DATE  Срок действия стоп -заявки. Возможные значения:  
 «GTC» – до отмены ; 
 «TODAY»  – до окончания текущей торговой сес сии; 
 Дата в формате  «ГГГГММДД»  
STOPPRICE2  Цена условия «стоп -лимит» для заявки типа «Т ейк-профит и стоп -лимит»  
MARKET_STOP_LIMIT  Признак исполнения заявки по рыночной цене при наступлении условия 
«стоп -лимит». Значения « YES» или « NO». Параметр заявок тип а «Тейк-
профит и стоп -лимит»  
MARKET _TAKE_PROFIT  Признак исполнения заявки по рыночной цене при наступлении условия 
«тейк-профит». Значения « YES» или « NO». Параметр заявок типа «Т ейк-
профит и стоп -лимит»  
IS_ACTIVE _IN_TIME Признак действия заявки типа «Т ейк-профит и стоп -лимит» в течение 
определенного интервала вр емени. Значения « YES» или « NO» 
ACTIVE _FROM _TIME Время начала действия заявки типа «Т ейк-профит и стоп -лимит» в формате 
«ЧЧММСС»  
ACTIVE _TO_TIME Время окончания действия заявки типа «Т ейк-профит и стоп-лимит» в 
формате «ЧЧММСС»  
PARTNER  Код организации – партнера по внебиржевой сделке  
Применяется  при «ACTION» = « NEW_NEG_DEAL », «ACTION» = 

 
 
 33 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Значение  
«NEW_REPO_NEG_DEAL » или «ACTION» = «NEW_EXT_REPO_NEG_DEAL»  
ORDER_KEY  Номер заявки, снимаемой из торговой системы  
Применяется  при «ACTION» = «KILL_ORDER» или «ACTION» = 
«KILL_NEG_DEAL» или «ACTION» = «KILL_QUOTE»  
STOP_ORDER_KEY  Номер стоп -заявки, снимаемой из торговой системы. Применяется тол ько 
при «ACTION» = «KILL_STOP_ORDER»  
TRANS_ID  Уникальный идентификационный  номер заявки , значение от «1» 
до «2 147 483 647» 
SETTLE_CODE  Код расчетов при исполнении внебиржевых заявок  
PRICE2  Цена второй части РЕПО  
REPOTERM  Срок РЕПО. Параметр сделок РЕПО -М 
REPORATE  Ставка РЕПО, в процентах  
BLOCK_SECURITIES  Признак блокировки  инструментов  на время операции РЕПО («YES», «NO»)  
REFUNDRATE  Ставка фиксированного возмещения, выплачиваемого в случае 
неисполнения вт орой части РЕПО, в процентах  
COMMENT  Текстовый комментарий, указанный в заявке. Используется при снятии 
группы за явок 
KILL_IF_LINKED_ORDER
_PARTLY_FILLED  Признак снятия стоп -заявки при частичном исполнении связанной 
лимитированной заявки. Используется  только при «STOP_ORDER_KIND» = 
«WITH_LINKED_LIMIT_ORDER». Возможные зн ачения: «YES» или «NO»  
OFFSET  Величина отступа от ма ксимума (минимума) цены последней сделки. 
Используется  при «STOP_ORDER_KIND» = «TAKE_PROFIT_STOP_ORDER» или 
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
OFFSET_UNITS  Единицы измерения отступа. Возможные значения:  
 «PERCENTS» – в процентах (шаг изменения – одна сотая 
процента),  
 «PRICE_U NITS» – в параметрах цены (шаг изменения равен 
шагу цены по данному  инструменту)  
Используется  при «STOP_ORDER_KIND» = «TAKE_PROFIT_STOP_ORDER» или 
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
SPREAD  Величина  защитного  спреда. Используется  при «STOP_ORDER_KIND» = 
«TAKE_PROFIT_STOP_ORDER» или 
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
SPREAD_UNITS  Единицы измерения защитного спр еда. Возможные значения:  
 «PERCENTS» – в процентах (шаг изменения – одна сотая 
процента),  
 «PRICE_UNITS»  – в параметрах цены (шаг изменения равен 
шагу цены по данному  инструменту)  
Используется  при «STOP_ORDER_KIND» = «TAKE_PROFIT_STOP_ORDER» или 

 
 
 34 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Значение  
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
BASE_ORDER_KEY  Регистрационный  номер  заявки -условия . Используется  при 
«STOP_ORDER_KIND» = «ACTIVATED_BY_ORDER_SIMPLE_STOP_ORDER» или 
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
USE_BASE_ORDER_  
BALANCE  Признак использования в качестве объема заявки «по исполнению» 
исполненного количества инструментов  заявки -условия. Возможн ые 
значения : «YES» или «NO». Используется  при «STOP_ORDER_KIND» = 
«ACTIVATED_BY_ORDER_SIMPLE_STOP_ORDER» или 
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
ACTIVATE_IF_BASE_ 
ORDER_PARTLY_FILLED  Признак активации заявки «по исполнению» при частичном исполнени и 
заявки -условия. Возможные  значения : «YES» или «NO». Используется  при 
«STOP_ORDER_KIND» = «ACTIVATED_BY_ORDER_SIMPLE_STOP_ORDER» или 
«ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER»  
BASE_CONTRACT  Идентификатор базового контракта для фьючерсов или опционов. 
Обязательный п араметр снятия заявок на рынке FORTS  
MODE  Режим перестановки заявок на рынке FORTS. Параметр опер ации «ACTION» 
= «MOVE_ORDERS» Возможные значения:  
 «0» – оставить количество в заявках без изменения,  
 «1» – изменить количество в заявках на новые,  
 «2» – при несовпадении  новых количеств с текущим хотя бы в 
одной заявке, обе з аявки снимаются  
FIRST_ORDER_NUMBER  Номер первой заявки  
FIRST_ORDER_NEW_ 
QUANTITY  Количество в первой заявке  
FIRST_ORDER_NEW_  
PRICE  Цена в первой заявке  
SECOND_ORDER_  
NUMBER Номер второй заявки  
SECOND_ORDER_NEW_  
QUANTITY  Количество во второй заявке  
SECOND_ORDER_NEW_  
PRICE  Цена во второй заявке  
KILL_ACTIVE_ORDERS  Признак снятия активных заявок по данному инструменту. Используется 
только при «ACTION» = «NEW_QUOTE». Возможные значения: «YES» или 
«NO»  
NEG_TRADE_OPERATION  Направление операции в сделке, подтверждаемой отчетом  
NEG_TRADE_NUMBER  Номер подтверждаемой отчетом сделки для исполнения  
VOLUMEMN  Лимит открытых позиций, при «Тип лимита» = « Ден.средства » или «Всего»  

 
 
 35 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Значение  
KGO Коэффициент клиентского гарантийного обеспечения  
USE_KGO  Параметр, который определяет, будет ли загружаться величина КГО при 
загрузке л имитов из  файла:  
 при USE_KGO=Y – величина КГО загружается.  
 при USE_KGO=N – величина  КГО не загружается  
При установке лимит а на Срочном рынке Московской Биржи с 
принудительным понижением (см.   п.7.7.2 Раздела 7 «Операции брокера» ) 
требуется указать USE_KGO=Y 
CHECK_LIMITS  Признак проверки попадания цены заявки в диапазон допустимых цен. 
Параметр Срочного рынка FORTS. Необязате льный параметр транзакций 
установки новых заявок по кла ссам «Опционы ФОРТС » и «РПС: Опционы 
ФОРТ С». Возможные значения: «Y ES» – выполнять проверку, «N O» – не 
выполнять  
MATCHREF  Ссылка, которая связывает две сделки РЕПО или РПС. Сделка может быть 
заключена  только между контрагентами, указавшими одинаковое значение 
этого параметра в  своих заявках. Параметр представляет собой 
произвольный набор символов (допускаются цифры и буквы  количеством до 
10). Необяз ательный параметр  
CORRECTION  Режим корректировки огра ничения по фьючерсным счетам. Возможные 
значения:  
 «Y» – включен, установкой лимита изменяется действующее 
значение,  
 «N» – выключен  (по умолчанию), установкой лимита задается 
новое значение  
 
Команды  снятия  группы  заявок  по условию  («KILL_ALL_ORDERS», «KILL _ALL_STOP_O RDERS»,  
«KILL_ALL_NEG_DEALS», «KILL_ALL_FUTURES_ORDERS») обрабатываются  следующим  
образом : 
1. Параметры «CLASSCODE», «TRANS_ID», «ACTION» , ACCOUNT  являются обязател ьными.  
2. Возможные дополнительные параметры для команд снятия заявок по условию:  
— «KILL _ALL_ORDERS»: «SECCODE», «ACCOUNT», «OPERATION», «CLIENT_CODE», 
«COMMENT»,  
— «KILL_ALL_STOP_ORDERS»: «SECCODE», «ACCOUNT», «OPERATION», «CLIENT_ 
CODE», «COMMENT», «EXPIRY_DATE»,  
— «KILL_ALL_NEG_DEALS»: «SECCODE», «ACCOUNT», «OPERATION», «CLIENT_ 
CODE», «COMMEN T», «PARTNER», «SETTLE_CODE»,  
— «KILL_ALL_FUTURES_ORDERS»: «SECCODE», «ACCOUNT», «OPERATION», 
«COMMENT», «CLIENT_CODE», «BASE_CONTRACT».  
3. Снятию  подлежат заявки, соответствующие всем указанным в транзакции параметрам 
(логич еское «И»).  
Перестановка заявок на рынке FORTS  выполняется по следующим правилам:  

 
 
 36 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 — Если MODE =0, то заявки с номерами, указанными после ключей 
FIRST _ORDER _NUMBER  и SECOND _ORDER_NUMBER , снимаются. В торговую 
систему отправляются две новые заявки, при этом изменяется только цена 
заявок, количес тво остается прежним;  
— Если MODE =1, то заявки с номерами, указанными после ключей 
FIRST _ORDER _NUMBER  и SECOND _ORDER _NUMBER , снимаются. В торговую 
систему отправляются две новые заявки, при этом изменится как цена заявки, 
так и колич ество;  
— Если MODE =2, то заявки с номерами, указанными после ключей 
FIRST _ORDER _NUMBER  и SECOND _ORDER _NUMBER , снимаются. Если количес тво 
инструментов  в каждой из с нятых заявок совпадает со значениями, указанными 
после FIRST _ORDER _NEW_QUANTITY  и SECOND _ORDER _NEW_QUANTITY , то в 
торговую систему отправляются две новые з аявки с соответствующими 
параметрами.  
Примеры строк, которые могут содержаться в файле:  
Транзакция  Строка  
Заявка на продажу  
Ростелеком, 
лимитированная, 3  лота по 
43.21 руб.  ACCOUNT=NL0080000043; CLIENT_CODE=467; TYPE=L; TRANS_ID=1; 
CLASSCODE= TQBR ; SECCODE=RU0008943394; ACTION=NEW_ORDER; 
OPERATION=S; PRICE=43,21; QUANTITY=3;  
Заявка на покупку  
ЛУКОЙЛ, лим итированная, 
3 лота по 253.3 руб.  ACCOUNT=NL0080000043; CLIENT_CODE=467; TYPE=L; TRANS_ID=2; 
CLASSCODE= TQBR ; SECCODE=LKOH; ACTION=NEW_ORDER; 
OPERATION=B; PRICE=253,3; QUANTITY=3;  
Заявка на покупку  
Русгидро, рыночная, 15 
лотов  ACCOUNT=NL0080000043; CLIENT_ CODE=467; TYPE=M; TRANS_ID=7; 
CLASSCODE= TQBR ; SECCODE=HYDR; ACTION=NEW_ORDER; 
OPERATION=B; PRICE=0; QUANTITY=15;  
Заявка на продажу  
Фьючерс LKOH -3.10, 
рыночная, 15  контрактов  ACCOUNT=SPBFUT00009; CLIENT_CODE= SPBFUT00009; TYPE=M; 
TRANS_ID=8; CLASSCODE=SPBF UT; SECCODE=LKH0; 
ACTION=NEW_ORDER; OPERATION=S; PRICE=16231; QUANTITY=15;  
Внебиржевая заявка 
на покупку  
Ростелеком, 
лимитированная, 1  лот 
по 42.81 руб.  ACCOUNT=NL0080000043; CLIENT_CODE=467; TYPE=L; TRANS_ID=3; 
CLASSCODE=PSEQ; SECCODE=RU0008943394; ACTIO N= 
NEW_NEG_DEAL; OPERATION=B; PRICE=42,81; QUANTITY=1; 
PARTNER=NC0080000000;  
Внебиржевая заявка 
на продажу 
РусГидро , лимитированная, 
3 лота по 1.113 руб.  ACCOUNT=NL0080000043; CLIENT_CODE=467; TYPE=L; TRANS_ID=4; 
CLASSCODE=PSEQ; SECCODE= HYDR ; ACTION=NEW_N EG_DEAL; 
OPERATION=S; PRICE=1,113; QUANTITY=3; PARTNER=NC0080100000;  
Заявка на сделку РЕПО  
Газпром, продажа 10 лотов 
по 100 руб. сроком на 4 дня 
с расчетами R90  ACTION=NEW_REPO_NEG_DEAL; TRANS_ID=135; CLASSCODE=RP MA; 
SECCODE=GAZP; ACCOUNT=NL0080000043; CL IENT_CODE=E1 //NOTE ; 
PARTNER=NC0038900000; OPERATION=S; QUANTITY=10; PRICE=100; 
SETTLE_CODE=R90; REPOTERM=4; REPORATE=5; REFUNDRATE=6;  
Заявка на сделку РЕПО -М 
Лукойл, покупка 10 лотов ACTION=NEW_EXT_REPO_NEG_DEAL; TRANS_ID=19; CLASSCODE=RPMA; 
SECCODE=LKOH; ACCOUNT=NL0080000043; CLIENT_CODE=Q7 //NOTE ; 

 
 
 37 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Транзакция  Строка  
на сумму 16000 руб. сроком 
на1 день с расчетами S0. 
Для заключения сделк и 
контрагент должен подать 
встречную заявку с 
указанием в поле «Ссылка» 
значения « link» PARTNER=NC0080100000; OPERATION=B; QUANTITY=10; 
REPOVALUE=16000; SETTLE_CODE=S0; REPOTERM=1; REPORATE=0; 
REFUNDRATE=0; BLOCK_SECURITIES=NO; MATCHREF=link  
Стоп-лимит  
РусГидро , 100 лотов 
на продажу по цене 7,000, 
стоп-цена – 7,300, срок 
до 19 мая 20 11 г. ACTION=NEW_STOP_ORDER; ACCOUNT= NL0080000043; TRANS_ID=17; 
CLASSCODE= TQBR ; SECCODE= HYDR ; OPERA TION=S; QUANTITY=100; 
CLIENT_CODE=467; STOPPRICE=7.3; PRICE=7.0; 
EXPIRY_DATE=20 110519;  
Стоп-заявка с условием по 
другому инструменту  
Ростел еком -ао, продажа 15 
лотов по  цене 7,000, 
условие по Ростел еком-ап, 
условие стоп -цены <= 8,000  ACTION=NEW_STOP_ORDER ; 
STOP_ORDER_KIND=CONDITION_PRICE_BY_OTHER_SEC; ACCOUNT= 
NL0080000043; QUANTITY=15; TRANS_ID=15; CLASSCODE= TQBR ; 
SECCODE= RTKM ; STOPPRICE_CLASSCODE= TQBR ; 
STOPPRICE_SECCODE= RTKMP ; STOPPRICE_CONDITION=<=; 
OPERATION=S; CLIENT_CODE=1001; STOPPRICE=8.0; PRICE=7. 0; 
Стоп-заявка со  связанной 
заявкой  
РусГидро , покупка 15 лотов 
по цене 8,500, стоп -цена >= 
8,000, и лимитированная 
заявка по  6,000  ACTION=NEW_STOP_ORDER; 
STOP_ORDER_KIND=WITH_LINKED_LIMIT_ORDER; ACCOUNT= 
NL0080000043; TRANS_ID=16; CLASSCODE= TQBR ; SECCODE= HYDR ; 
OPERATION=B; QUANTITY=15; CLIENT_CODE=1001; STOPPRICE=8.0; 
PRICE=8.5; LINKED_ORDER_PRICE=6.0; 
KILL_IF_LINKED_ORDER_PARTLY_FILLED=NO;  
Тейк-профит  
Лукойл, покупка 1 лота, 
активация при достижении 
цены 265 с отступом в 5% 
и защитным интервалом в  5 
пипсов, срок исполнения 
до 06.07.20 10 ACTION=NEW_STOP_ORDER; TRANS_ID=8; 
STOP_ORDER_KIND=TAKE_PROFIT_STOP_ORDER; STOPPRICE=265; 
CLIENT_CODE=Q5; OPERATION=B; SECCODE=LKOH; CLASSCODE= TQBR ; 
ACCOUNT=L01 -00000F00; QUANTITY=1; EXPIRY_DATE=20 100706; 
OFFSET=5; OFFSET_UNIT S=PERCENTS; SPREAD=5; 
SPREAD_UNITS=PRICE_UNITS;  
Тейк-профит и стоп -лимит  
Лукойл, покупка 1 лота, 
активация т ейк-профита при 
достижении цены 2000 с 
отступом в 5% и защитным 
спредом в 3%, стоп -цена 
2222, цена лимитированной 
заявки 2255, время действия 
с 10:00:01 по 19:45:45  ACTION=NEW_STOP_ORDER; TRANS_ID=10055; CLASSCODE= TQBR ; 
SECCODE=LKOH; ACCOUNT=L01 -00000F00; CLIENT_CODE=Q7; 
OPERATION=B; QUANTITY=1; PRICE=2255; STOPPRICE=2000; 
STOP_ORDER_KIND=TAKE_PROFIT_AND_STOP_LIMIT_ORDER; OFFSET=5; 
OFFSET_UNITS=PERC ENTS; SPREAD=3; SPREAD_UNITS=PERCENTS; 
MARKET_TAKE_PROFIT=NO; STOPPRICE2=2222; 
IS_ACTIVE_IN_TIME=YES; ACTIVE_FROM_TIME=100001; 
ACTIVE_TO_TIME=194545; MARKET_STOP_LIMIT=NO  
Тейк-профит по  исполнению 
заявки  
по частичному исполнению 
заявки с  номером 81874488 
выставить т ейк-профит ACTION=NEW_STOP_ORDER; TRANS_ID=11; 
STOP_ORDER_KIND=ACTIVATED_BY_ORDER_TAKE_PROFIT_STOP_ORDER
; BASE_ORDER_KEY=81874488; USE_BASE_ORDER_BALANCE=yes; 
ACTIVATE_IF_BASE_ORDER_PARTLY_FILLED=yes; SPREAD=10; 
OFFSET=10; OFFSET_UNITS=PRICE_UNITS; 

 
 
 38 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Транзакция  Строка  
на покупку Лукойла 
в объеме исполненной части 
заявки -условия, 
при достижении цены 265 с 
отступом 10 пипсов 
и защитным интервалом 10 
пипсов  SPREAD_UNITS=PRICE_UNITS; STOPPRICE=265; CLIENT_CODE=Q5; 
OPERATION=B; SECCODE=LKOH; CLASSCODE= TQBR ; ACCOUNT=L01 -
00000F00;  
Стоп-лимит по  исполнению 
заявки  
по частичному исполнению 
заявки с  номером 81874488 
выставить стоп -лимит 
на покупку Лукойла 
в объеме исполненной части 
заявки -условия, со  стоп-
ценой 271 и  ценой заявки 
270 ACTION=NEW_STOP_ORDER; TRANS_ID=12; 
STOP_ORDER_KIND=A CTIVATED_BY_ORDER_SIMPLE_STOP_ORDER; 
BASE_ORDER_KEY=81874488; USE_BASE_ORDER_BALANCE=yes; 
ACTIVATE_IF_BASE_ORDER_PARTLY_FILLED=yes; PRICE=270; 
STOPPRICE=271; CLASSCODE= TQBR ; SECCODE=LKOH; ACCOUNT=L01 -
00000F00; OPERATION=B; CLIENT_CODE=Q5;  
Тейк-профит и ст оп-лимит 
по исполнению заявки  
По частичному исполнению 
заявки с номером 123456 
выставить т ейк-профит на 
покупку Лукойла по 
рыночной цене, активация 
при достижении цены 2000 
с отступом в 5 пипсов, и 
стоп-лимит: стоп -цена 1990, 
исполнение по рыночной 
цене ACTION=NEW_STOP_ORDER; TRANS_ID=10060; CLASSCODE= TQBR ; 
SECCODE=LKOH; ACCOUNT=L01 -00000F00; CLIENT_CODE=Q7; 
OPERATION=B; PRICE=2010; STOPPRICE=2000; 
STOP_ORDER_KIND=ACTIVATED_BY_ORDER_TAKE_PROFIT_AND_STOP_LI
MIT_ORDER; OFFSET=5; OFFSET_UNITS=PRICE_UNITS; SPREA D=3; 
SPREAD_UNITS=PRICE_UNITS; BASE_ORDER_KEY=123456; 
USE_BASE_ORDER_BALANCE=YES; 
ACTIVATE_IF_BASE_ORDER_PARTLY_FILLED=YES; 
MARKET_TAKE_PROFIT=YES; STOPPRICE2=1990; 
MARKET_STOP_LIMIT=YES  
Снятие заявки  
с номером 503983  CLASSCODE= TQBR ; SECCODE=RU0009024277; TRANS_ID=5; 
ACTION=KILL_ORDER; ORDER_KEY=503983;  
Снятие внебиржевой заявки  
с номером 503984  CLASSCODE= TQBR ; TRANS_ID=6; ACTION=KILL_NEG_DEAL; 
ORDER_KEY=503984;  
Снятие всех  заявок  
клиента с кодом Q6  TRANS_ID=1; CLASSCODE= TQBR ; ACTION=KILL_ALL_ORDERS; 
CLIENT_CODE=Q6;  
Снятие всех стоп -заявок  
с направлением 
«на покупку»  TRANS_ID=2; CLASSCODE= TQBR ; ACTION=KILL_ALL_STOP_ORDERS; 
OPERATION=B;  
Снятие всех адресных 
заявок  
по классу  «РПС: Акции 1 -го 
уровня»  TRANS_ID=3; CLASSCODE=PSEQ; ACTION=KILL_ALL_NEG_DEALS;  
Снятие всех заявок на 
срочном рынке FORTS  TRANS_ID=50; ACCOUNT=SPBFUT00001; 
ACTION=KILL_ALL_FUTURES_ORDERS; OPERATION=B; 

 
 
 39 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Транзакция  Строка  
на покупку контрактов 
на курс акций Ростелеком -
ао CLASSCODE=SPBFUT; BASE_CONTRACT= RTKM ; 
Перестановка заявок на 
срочном рынке FORTS  ACTION=MOVE_ORDERS; TRANS_ID=333; CLASSCODE=SPBFUT; 
SECCODE=EBM6; FIRM_ID=SPBFUT389; MODE=1; 
FIRST_ORDER_NUMBER=21445064; FIRST_ORDER_NEW_PRICE=10004; 
FIRST_ORDER_NEW_QUANTITY= 4; SECOND_ORDER_NUMBER=21445065; 
SECOND_ORDER_NEW_PRICE=10004; 
SECOND_ORDER_NEW_QUANTITY=4;  
Безадресная заявка  
на покупку  РусГидро , 1 лот 
по 15.0 руб., коду расчетов 
T0, с признаком снятия 
активных безадресных 
заявок «НЕТ»  ACTION=NEW_QUOTE; TRANS_ID=779;  CLASSCODE=PSEQ; 
SECCODE= HYDR ; OPERATION=B; QUANTITY=1; PRICE=15.0; 
SETTLE_CODE=T0; KILL_ACTIVE_ORDERS=NO;  
Снятие безадресной заявки  
с номером 15919  ACTION=KILL_QUOTE; TRANS_ID=781; CLASSCODE=PSEQ; 
SECCODE= HYDR ; ORDER_KEY=15919;  
Импорт ограничений 
по фьючерсным счетам  
по счету Трейдера 389_011, 
где лимит открытых позиций 
«Всего » составляет 20  млн. 
рублей  ACTION=SET_FUT_LIMIT; TRANS_ID=22; CLASSCODE=SPBFUT; 
ACCOUNT=389_011; VOLUMEMN=20000000,00; KGO=0,00; USE_KGO=Y; 
FIRM_ID=SPBFUT389; CORRECTION=N  
Подтве рждение отчетом 
сделок для  исполнения  
с номером 179205900  ACTION=NEW_REPORT; TRANS_ID=15; CLASSCODE=RPMA; 
NEG_TRADE_OPERATION=B; NEG_TRADE_NUMBER=179205900;  
 
Формат .tro -файла с результатами обработки транзакц ий 
Файл представляет собой последовательность строк, каждая из которых содержит 
информацию по отдельной транзакции. Параметры транзакции описываются в виде 
«НАЗВ АНИЕ_ПАРАМЕТРА=  значение_параметра» и разделяются символом «;».  
Параметры и принимаемые ими зна чения:  
Параметр  Значение  
TRANS_ID  Уникальный идентификационный номер заявки  
STATUS  Результат выполнения операции. Может принимать одно из следующих 
значений: 
 «0» – транзакция отправлена серверу;  
 «1» – транзакция пол учена на сервер QUIK от клиента;  
 «2» – ошибка при передаче транзакции в торговую систему, 
поскольку отсутствует по дключение шлюза Московской Биржи , 
повторно транзакция не  отправляется;  

 
 
 40 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Значение  
 «3» – транзакция выполнена;  
 «4» – транзакция не выполнена торговой системой, код ошибки 
торговой системы будет  указан в  поле «DESCRIPTION»;  
 «5» – транзакция не прошла проверку сервера QUIK по каким -
либо критериям. Напр имер, проверку на наличие прав у 
пользователя на о тправку транзакции данного типа;  
 «6» – транзакция не прошл а проверку лимитов сервера QUIK;  
 «10» – транзакция не поддерживается торговой системой. 
К примеру, попытка о тправить «ACTION = MOVE_ORDERS» 
на Московской Бирже ; 
 «11» – транзакция не прошла проверку правильности 
электронной подписи. К прим еру, если ключи, 
зарегистрированные на  сервере, не  соответ ствуют подписи 
отправле нной транзакции ; 
 «12» – не удалось дождаться ответа на транзакцию, т.к. истек 
таймаут ожидания. Может возникнуть при подаче транзакций из 
QPILE ; 
 «13» – транзакция  отвергнута, т.к. ее выполнение могло привести 
к кросс -сделке (т.е. сде лке с тем же самым клиентским счетом) ; 
 «14» – транзакция не прошла контроль дополнительных 
ограничений;  
 «15» – транзакция принята после нарушения дополнительных 
ограничений;  
 «16» – транзакция отменена пользователем в ходе проверки 
дополнительных ограничени й 
TRANS_NAME  Описание выполняемой транзакции, например «Ввод заявки»  
DESCRIPTION  Текстовый комментарий к полю STATUS, содержащий ответ сервера QUIK или 
торговой си стемы 
ORDER_NUMBER  Регистрационный номер заявки в торговой системе  
 
Пример  строки .tro -файла: 
TRANS_ID=14;STATUS=0;TRANS_NAME="Ввод заявки"; DESCRIPTION ="Отправлена транза кция"; 
TRANS_ID=14;STATUS=3;TRANS_NAME=" Ввод заявки"; DESCRIPTION="(160) Заявка на покупку 
N 68359610 зарегистрирована ."; ORDER_NUMBER=68359610;  
 

 
 
 41 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Настройка  
 
1. Из пункта меню Сервисы  / Экспорт /импорт  данных / Импорт транзакций из 
файла … откройте окно настройки импорта транзакций.  
2. В поле «Файл с исходными данными о  транзакциях» введите полный путь к .tri -файлу 
c транзакциями, н апример, «C: \quikdata \input.tri».  
3. В поле «Обрабатыват ь через ... секунд» укажите периодичность чтения файла. 
Рекомендуемый интервал – 5 секунд.  
4. Если установлен флажок «Оповещать об обработке файла звуковым сигналом», то при 
каждом обращении к файлу програ мма будет подавать звуковой сигнал. Используйте его 
при необходимости для контроля над функционированием процесса импорта тра нзакций.  
5. В поле «Файл с данными об успешно от правленных транзакциях» введите полный  путь 
к .tro-файлу, н апример, «C: \quikdata \output.tro».  
6. В поле «Файл с журналом отправляемых транзакци ях» введите полный путь к .trr -файлу, 
например, «C: \quikdata \log.trr».  
7. Если установлен флажок «Вести журнал отправляемых транзакций», то в .trr -файл будет 
записываться информация об обраб отанных транзакциях.  
8. Следующие параметры («Число обращений сделанных к файлу» и т.д.) и спользуются как 
статистика процесса импорта транзакций.  
9. Нажатие кнопки «Начать обработку» приводит к старту процесса импорта транзакций. 
Нажатием кнопки «Прекратить обработку» процесс импорта останавл ивается.  
10. Нажмите кнопку «Закрыть» для закрытия окна настройки с сохранением выполненных 
настроек. Если процесс импорта начат, он будет осуществляться автоматически 
в фоновом р ежиме.  
Запись данных о транза кции в текстовый файл должна осуществляться  целой 
строкой. Если запись параметров  одной сд елки будет производиться 

 
 
 42 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 нескол ькими обращениями к файлу, то возможна ситуация, когда QUIK начнет 
чтение не полностью сформированной тра нзакции и она будет неправильно 
обработана либо  отвергнута.  
 
6.10  Импорт транзакций через API  
меню Сервисы  / Экспорт/импорт д анных  / Внешние транзакции … 
6.10.1  Назначение  
Данный функционал предназначен для отправки транзакций, подготовленных программой 
клиента. Функционал реализован в виде би блиотеки Trans2 QUIK .dll. Библиотека содержит 
в себе функции, описание которых приводится ниже. При вызове этих функций можно:  
1. Установить или разорвать  связь между Рабочим местом QUIK и библиотекой 
Trans2 QUIK .dll. 
2. Проверить наличие соединения между  Рабочим местом QUIK и библиотекой 
Trans2 QUIK .dll и между Рабочим м естом QUIK и сервером QUIK.  
3. Отправить  транзакцию.  
4. Получить и нформацию по заявкам и сделкам.  
Существует два способа передачи транзакций – синхронный и асинхронный, которые 
реализ уются отдельными функциями:  
1. При синхронной передаче транзакций выход из функции осуществляется только после 
получени я ответа от сервера QUIK. Следовательно, отправлять си нхронные транзакции 
можно только последовательно, дожидаясь ответа о ка ждой отправленной транзакции – 
этот способ проще и более подходит для программистов с небольшим опытом разработки 
программ.  
2. При асинхронной передаче транзакций выход из функции осуществляется сразу же. Для 
получения ответа об отправленных асинхронных транзакциях используется функция 
обратного вызова ( callback ). Функция вызывается при каждом получении ответа 
об исполненной или отвергну той транзакции. Значения статусов исполнения транзакции, 
которые возвращаются в функции обратного вызова, приведены в описании к тем же 
статусам, которые использую тся при отправке транзакций через файл (см.  п. 6.9). 
Также предусмотрена функция обратного вызова для контроля за соединениями между 
терминалом QUIK и библиотекой Trans2QUIK.dll  и между Рабочим местом QUIK и сервером 
QUIK.  
Описание транзакций при импорте через API аналогично описа нию транзакций при импорте 
через файл (см.  п. 6.9). Исключением являются следующие типы транзакций, которые 
не поддерживаются библиотекой «trans2quik.dll»:  
• «KILL_ALL_ORDERS » – снять все за явки из торговой системы,  
• «KILL_ALL_STOP_ORDERS» – снять  все стоп-заявки , 

 
 
 43 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 • «KILL_ALL_NEG_DEALS» – снять все заявки на внебиржевые сделки и заявки на  сделки 
РЕПО.  
Для получения информации о заявках и сделках пользователь сначала должен 
сформировать список по лучаемых инструментов, раздельно для заявок и сделок. Затем 
выполняется запуск процедуры получения информации с помощью функций обратного 
вызова. При прекращении получения информации по заявкам и сделкам очищаются списки 
получаемых инструментов. По дробное описание см. п. 6.10.23 . 
6.10.2  Настройки  
Настройка импорта транзакции через API осуществляется в диалоге «Обработка внешних 
транзакций» (меню Сервисы  / Экспорт /импорт  данных  / Внешние транз акции…). 
 
Обработка внешних транзакций начинается п осле нажатия на кнопку «Начать обработку».  
При установленном флажке «Запускать процесс обработки внешних транзакций 
автоматич ески» сервис обработки внешних транзакций запуск ается автоматически при 
загрузк е Рабочего места QUIK. 
Статистика по полученным и отправленным транзакциям отображается в полях «Число 
полученных внешних транзакций» и «Число транза кций, отправленных на сервер».  
6.10.3  Константы  
Описание констант, значения которых возвращаются при выходе из фун кций и процедур:  
Константа  Значение  
TRANS2QUIK_SUCCESS  0 
TRANS2QUIK_FAILED  1 
TRANS2QUIK_QUIK_TERMINAL_NOT_FOUND  2 
TRANS2QUIK_DLL_VERSION_NOT_SUPPORTED  3 
TRANS2QUIK_ALREADY_CONNECTED_TO_QUIK  4 
TRANS2QUIK_WRONG_SYNTAX  5 

 
 
 44 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Константа  Значение  
TRANS2QUIK_QUIK_NOT_CONNECTED  6 
TRANS2QUIK_DLL_NOT_CONNECTED  7 
TRANS2QUIK_QUIK_CONNECTED  8 
TRANS2QUIK_QUIK_DISCONNECTED  9 
TRANS2QUIK_DLL_CONNECTED  10 
TRANS2QUIK_DLL_DISCONNECTED  11 
TRANS2QUIK_MEMORY_ALLOCATION_ERROR  12 
TRANS2QUIK_WRONG_CONNECTION_HANDLE  13 
TRANS2QUIK_WRONG_INPUT _PARAMS  14 
 
6.10.4  Функции  
Перечень функций для работы с транзакциями через API:  
Функция  Назначение  
TRANS2QUIK_CONNECT  Установление связи библиотеки Trans2QUIK.dll 
с Рабочим местом QUIK  
TRANS2QUIK_DISCONNECT  Разрыв соединения библиотеки Trans 2QUIK.dll 
с Рабочи м местом QUIK  
TRANS2QUIK_IS_DLL_CONNECTED  Проверка соединения библиотеки Trans2QUIK.dll 
с Рабочим местом QUIK  
TRANS2QUIK_IS_QUIK_CONNECTED  Проверка соединения терминала QUIK 
с сервером Q UIK 
TRANS2QUIK_SEND_ SYNC _TRANSACTION  Отправка си нхронной транзакц ии 
TRANS2QUIK_SEND_ ASYNC _TRANSACTION  Отправка аси нхронной транзакции  
TRANS2QUIK_CONNECTION_STATUS_CALLBACK  Описание прототипа функции обратного вызова 
для ко нтроля за состоянием соединения между 
Trans2QUIK.dll и используемым терминалом QUIK 
и между исп ользуемым терминалом QUIK и 
сервером 
TRANS2QUIK_SET_CONNECTION_STATUS_CALLBACK  Описание прототипа функции обратного вызова 
для о бработки полученной информации о 
соединении  

 
 
 45 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Функция  Назначение  
TRANS2QUIK_TRANSACTION_REPLY_CALLBACK  Описание прототипа функции обратного вызова 
для обработки полученной информации об 
отправленной тра нзакции  
TRANS2QUIK_SET_TRANSACTIONS_REPLY_CALLBACK  Функция  устанавливает  функцию  обратного  
вызова  
TRANS2QUIK_TRANSACTION_REPLY_CALLBACK  
TRANS2QUIK_ORDER_STATUS_CALLBACK  Описание прототипа функции обр атного вызова 
для о бработки полученной информации по 
заявке  
TRANS 2QUIK_TRADE _STATUS _CALLBACK  Описание прототипа функции обратного вызова 
для обработки полученной информации по 
сделке 
TRANS2QUIK_SUBSCRIBE_ORDERS  Функция создания списка инструментов по 
классам, по  которому будут принимат ься заявки  
TRANS2QUIK_SUBSCRIBE_TRADES  Функция создания списка инструментов по 
классам, по  которому будут принимат ься сделки  
TRANS 2QUIK_START _ORDERS  Вызов функции инициирует процесс получения 
заявок по  инструментам, список  которых был 
сформирован пре дварительным вызовом 
функции TRANS2QUIK_SUBSCRIBE_ORDERS  
TRANS2QUIK_START_TRADES  Вызов функции инициирует процесс получения 
сделок по  инструментам, список которых был 
сформирован пре дварительным вызовом 
функции TRANS2QUIK_SUBSC RIBE_TRAD ES 
TRANS2QUIK_UNSUBSCRIBE_ORDERS  Вызов функции прерывает работу функции 
TRANS 2QUIK_START _ORDERS  и производит 
очистку списка получаемых инструментов, 
сформированного функцией 
TRANS2QUIK_SUBSCRIBE_ORDERS  
TRANS2QUIK_UNSUBSCRIBE_TRADES  Вызов функции  прерывает работу функции 
TRANS 2QUIK_START _TRADES  и производит 
очистку списка получаемых инструментов, 
сформированного функцией 
TRANS2QUIK_SUBSCRIBE_ TRADE S 
 
6.10.5  Функция TRANS2QUIK_CONNECT  
Функция используется для установления связи библиотеки Trans2QUIK.dll  с Рабочим местом 
QUIK.  

 
 
 46 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 long __stdcall TRANS2QUIK_CONNECT(LPCSTR  lpcstrConnectionParamsString, 
long*  nTransactionExtendedErrorCode , LPSTR  lpstrErrorMessage, 
DWORD  dwErrorMessageSize)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать сле дующие знач ения: 
 TRANS2QUIK_SUCCESS – соединение установлено успешно,  
 TRANS2QUIK_QUIK_TERMINAL_NOT_FOUND – в указанном 
каталоге либо отсутствует INFO.EXE, либо у него не запущен 
сервис обработки внешних подключений, 
в nTransactionExtendedErrorCode  в этом с лучае п ередается 0,  
 TRANS2QUIK_DLL_VERSION_NOT_SUPPORTED – используемая 
версия Trans2QUIK.dll не поддерживается указанным INFO.EXE, 
в nTransactionExtendedErrorCode  в этом случае п ередается 0,  
 TRANS2QUIK_DLL_ALREADY_CONNECTED _TO_QUIK  – 
соединение уже устано влено, в  nTransactionExtendedErrorCode  
в этом случае п ередается 0,  
 TRANS2QU IK_FAILED – произошла ошибка при установлении 
соединения, в  nTransactionExtendedErrorCode  в этом случае 
передается дополнительный код оши бки 
lpcstrConnectionParamsS
tring Тип: указа тель на переменную типа С трока. Полный путь к каталогу с 
исполняемым файлом INFO.EXE, с которым устанавливается соедин ение 
nTransactionExtendedErr
orCode  Тип: указатель на пер еменную типа Long. В случае возникновения ошибки 
может содержать расширенный код ошибки 
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возникновения 
ошибки может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается указ атель 
lpstrErrorMessage  
 
6.10.6  Функция T RANS2QUIK_DISCONNECT  
Функция используется для разрыва связи библиотеки Trans2QUIK.dll  с термин алом QUIK.  
long __stdcall TRANS2QUIK_DISCONNECT(long*  nTransactionExtendedErrorCode , 
LPSTR  lpstrErrorMessage, DWORD  dwErrorMessageSize)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие знач ения: 
 TRANS2QUIK_SUCCESS – соединение библиотеки 
Trans2QUIK.dll с  Рабочим местом QUIK разорвано у спешно,  
 TRANS2QUIK_FAILED – произошла ошибка при разрыве 
соединения, в  nTransactionExtendedErrorCod e в этом случае 
передается дополнительный код ошибки,  
 TRANS2QUIK_DLL _NOT_CONNECTED – попытка раз орвать 
соединение при не установленной связи. В этом случае в 
nTransactionExtendedErrorCode  может передаваться 
дополн ительный код ошибки  
nTransactionExtendedEr rТип: указатель на пер еменную типа Long. В случае возникновения ошибки 

 
 
 47 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
orCode  может содержать расшире нный код ошибки  
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возникновения 
ошибки может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается указ атель 
lpstrErrorMessage  
 
6.10.7  Функция  TRANS2QUIK_IS_QUIK_CONNECTED  
Функция используется для проверки наличия соединения между терминалом QUIK и 
сервером.  
long __stdcall TRANS2QUIK_IS_QU IK_CONNECTED 
(long*  nTransactionExtendedErrorCode , LPSTR  lpstrErrorMessage, 
DWORD  dwErrorMessageSize)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следу ющие значения:  
 TRANS 2QUIK_QUIK_CONNECTED – соединение уст ановлено,  
 TRANS2QUIK _QUIK_NOT_CONNECTED – соединение не 
установлено,  
 TRANS2QUIK_DLL _NOT_CONNECTED  – не установлена связь 
библиотеки Trans 2QUIK.dll с терминалом QUIK. В этом случае 
проверить наличие или отсутствие связи терминала QUIK с 
сервером невозмо жно 
nTransactionExtende dErr
orCode  Тип: указатель на пер еменную типа Long. В случае возникновения ошибки 
может содержать расширенный код оши бки 
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возникновения 
ошибки может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается ук азатель 
lpstrErrorMessage  
 
6.10.8  Функция  TRANS2QUIK_IS_DLL_CONNECTED  
Функция используется для проверки наличия соединения между библиотекой 
Trans2QUIK.dll  и терминалом QUIK.  
long __stdc all TRANS2QUIK_IS_DLL_CONNECTED 
(long*  nTransactionExtendedErrorCode , LPSTR  lpstrErrorMessage, 
DWORD  dwErrorMessageSize)  

 
 
 48 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие значения:  
 TRANS2QUIK_ DLL_CONNECTED – соединение библи отеки 
Trans2QUIK.dll с  терминалом QUIK установлено,  
 TRANS2QUIK_DLL _NOT_CONNECTED – не установлена связь 
библиотеки Trans2QUIK.dll с терминалом QUIK  
nTransactionExtendedErr
orCode  Тип: указатель на переменную типа Long. В случае возникн овения ошибки 
может с одержать расширенный код ошибки  
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возни кновения 
ошибки может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается ук азатель 
lpstrErrorMessage  
 
6.10.9  Функция  TRANS2QUIK_SEND_SYNC_TRANSACTION  
Синхронная отправка транзакции. При синхронной отправке возврат из функции происходит 
только после получения результата выполнения транзакции, либо после разрыва связи 
терминала QUIK с сервером.  
long __stdcall TRANS2QUIK_SEND_SYNC_TRANSACTION (LPSTR  lpstTransactionString, 
long*  pnReplyCode, PDWORD  pdwTransId, double*  pdOrderNum, 
LPSTR  lpstrResultMessage, DWORD  dwResultMessageSize, 
long*  nTransactionExtendedErrorCode , LPSTR  lpstErrorMessage, 
DWORD  dwErrorMessageSize)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие зн ачения:  
 TRANS2QUIK_SUCCESS – транзакция успешно отправлена на 
сервер,  
 TRANS2QUIK_WRONG_SYNTAX – строка транзакции заполнена 
неверно, 
 TRANS2QUIK_DLL_NOT_CONN ECTED – отсутствует соединение 
между библиот екой Trans2QUIK.dll и терминалом QUIK,  
 TRANS2QUIK_QUIK_NOT_CONNECTED – отсутствует соединение 
между термин алом QUIK и сервером,  
 TRANS2QUIK_FAILED – в nTransactionExtendedErrorCode  в этом 
случае может перед аваться  дополнительный код ошибки  
lpstrTransactionString  Тип: указатель на переменную типа С трока. Строка с описанием транзакции. 
Формат строки тот же самый, что и при о тправке транзакций через файл  
pnReplyCode  Тип: указатель типа Long. Получает статус выполнен ия транзакции. Значения 
статусов те  же самые, что и при подаче заявок через файл (см.  п. 6.11.4) 
pdwTransId  Тип: указатель типа Long. Получает значение TransID транзакции, указанной 
пользоват елем 
pdOrderNum  Тип: указатель типа Double. В случае успеха получает номер заявки в торговой 
системе 

 
 
 49 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
lpstrResultMessage  Тип: указатель на переменную типа С трока. В случае успеха содержит 
сообщение торговой сист емы 
dwResultMessageSize  Тип: Long. Содержит длину строки, на кото рую ссылается указатель 
lpstrResultMe ssage 
nTransactionExtended
ErrorCode  Тип: указатель на переменную типа Long. В случае возникновения ошибки 
может соде ржать расширенный код ошибки  
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае воз никновения ошибки 
может пол учать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается указ атель 
lpstrErrorMessage  
 
6.10.10  Функция  TRANS2QUIK_SEND_ASYNC_TRANSACTION  
Асинхронная передача транзакции. При отправке а синхронной транзакции возврат из 
функции происходит сразу же, а результат выполнения транзакции сообщается через 
соответствующую функцию обратного  вызова.  
long __stdcall TRANS2QUIK_SEND_ASYNC_TRANSACTION 
(LPSTR  lpstTransactionString, long*  nTransactionExte ndedErrorCode , 
LPSTR  lpstErrorMessage, DWORD  dwErrorMessageSize);  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие зн ачения:  
 TRANS2QUIK _SUCCESS – транзакция успешно отправлена на 
сервер,  
 TRANS2QUIK_WRONG_SYNTAX – строка тра нзакции заполнена 
неверно,  
 TRANS2QUIK_DLL_NOT_CONNECTED – отсутствует соединение 
между библи отекой Trans2QUIK.dll и терминалом QUIK,  
 TRANS2QUIK_QUIK_NOT_CONNECTED – отсутствует соединение 
между те рминалом QUIK и сервером,  
 TRANS2QUIK_FAILED  – транзакцию отп равить не удалось. В 
этом случае в  переменную nTransactionExtendedErrorCode  может 
передаваться дополнительный код оши бки 
lpstrTransactionString  Тип: указатель на переменную типа С трока. Строка с описанием 
транзакции. Формат строки такой же, что и при о тправке транзакций через 
файл  
nTransactionExtendedErr
orCode  Тип: указатель на переменную типа Long. В случае возникнов ения ошибки 
может содержать расширенный код ошибки  
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возникн овения 
ошибк и может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается указ атель 
lpstrErrorMessage  

 
 
 50 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
  
6.10.11  Прототип функции обратного вызова для контроля за состоянием 
соединения TRANS2QUIK_CONNECTION_STATUS_CALL BACK  
Описание прототипа функции обратного вызова для контроля за состоянием соединения 
между библиотекой Trans 2QUIK .dll и используемым терминалом QUIK  и между 
используемым терминалом QUIK и сервером.  
void __stdcall TRANS2QUIK_CONNECTION_STATUS_CALLBACK 
(long nConnectionEvent, long  nTransactionExtendedErrorCode , LPSTR  lpstrInfoMessage)  
Параметр  Описание  
nConnectionEvent  Тип: Long. Возвращаемое число может принимать следующие зн ачения:  
 TRANS2QUIK_QUIK_CONNECTED – соединение между 
терминалом QUIK и  сервером у становлено,  
 TRANS2QUIK_QUIK_DISCONNECTED – соединение между 
терминалом QUIK и  сервером разорвано,  
 TRANS2QUIK_DLL_CONNECTED – соединение между DLL и 
используемым те рминалом QUIK установлено,  
 TRANS2QUIK _DLL_DISCONNECTED – соединение между DLL и 
используемым терминалом QUIK разорвано  
nTransactionExtendedEr
rorCode  Тип: Long. В случае возникновения ошибки может содержать расширенный 
код оши бки 
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возникновения ошибки 
может получать сообщение о в озникшей ошибке  
 
6.10.12  Функция  TRANS2QUIK_SET_CONNECTION_STATUS_CALLBACK  
Описание прототипа функции обратного вызова для обработки полученной информации 
о соединении.  
long __stdcall TRANS2QUIK_SET_CONNECTION_STATUS_CALLBACK 
(TRANS2QUIK_CONNECTION_STATUS_CALLBAC K pfConnectionStatusCallback, 
long*  nTransactionExtendedErrorCode , LPSTR  lpstrErrorMessage, 
DWORD  dwErrorMessageSize)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие зн ачения:  
 TRANS2QUIK_SUCCESS – функция обратного вызова 
устано влена,  
 TRANS2QUIK_FAILED – функцию обратного вызова установить 
не удалось . В этом случае в переменную 
nTransactionExtendedErrorCode  может передаваться 
дополнительный код ошибки  

 
 
 51 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
TRANS2QUIK_CONNECTIO
N_STATUS_CALLBACK  Тип: указатель на функцию. Указыва ется адрес функции, которая будет 
обрабатывать информацию о состоянии связи би блиотеки Trans2QUIK.dll 
с терминалом QUIK или терминала QUIK с серв ером 
nTransactionExtendedError
Code Тип: указатель на переменную типа Long. В случае возникнов ения ошибки 
может  содержать расширенный код ошибки  
lpstrErrorMessage  Тип: указатель на переменную типа Строка. В случае возникн овения 
ошибки может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается указ атель 
lpstrErrorMessage  
 
6.10.13  Прототип функции обратного вызова для обработки полученной 
информации о транзакции TRANS2QUIK_TRANSACTION_REPLY_CALLBACK  
Описание прототипа функции обратного вызова для обработки полученной информации 
об отправленной транзакции.  
Внимание!  Подача асинхронных транзакций с использованием функции 
обратного вызова и синхронных транзакций  одновременно запрещена. Это 
связано с тем, что невозможно корректно вызвать функцию обратного вызова 
в момент, когда функция обработки синхронной тра нзакции ещ е не закончила 
свою работу.  
 
void __stdcall TRANS2QUIK_TRANSACTION_REPLY_CALLBACK(long  nTransactionResult, 
long nTransactionExtendedErrorCode, long  nTransactionReplyCode, DWORD  dwTransId, 
unsigned __int64  dOrderNum, LPSTR  lpstrTransactionReplyMessage , 
intptr_t transReplyDescriptor ) 
Параметр  Описание  
nTransactionResult  Тип: Long. Возвращаемое число может принимать следующие 
значения: 
 TRANS2QUIK_SUCCESS – транзакция передана успе шно, 
 TRANS2QUIK_DLL_NOT_CONNECTED – отсутствует 
соединение между би блиотекой Tran s2QUIK.dll и 
терминалом QUIK,  
 TRANS2QUIK_QUIK_NOT_CONNECTED – отсутствует 
соединение между те рминалом QUIK и сервером,  
 TRANS2QUIK _FAILED – транзакцию передать не удалось. 
В этом случае в  переменную 
nTransactionExtendedErrorCode  может передаваться 
дополните льный код оши бки 
nTransactionExtendedErrorCode  Тип: Long. В случае возникновения проблемы при выходе из 
функции обратного вызова в переменную может быть помещен 
расш иренный код ошибки  

 
 
 52 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
nTransactionReplyCode  Тип: Long. Указатель для получения статуса выпол нения транзакции. 
Значения ст атусов те же самые, что и при подаче заявок через файл  
dwTransId  Тип: Long. Содержимое параметра TransId , который получила 
зарегистрированная транзакция  
dOrderNum  Тип: unsigned __int64. Номер заявки, присвоенный торговой систе мой 
в результате выполн ения транзакции  
lpstrTransactionReplyMessage  Тип: указатель на переменную типа С трока. Сообщение от торговой 
системы или сервера QUIK  
transReplyDescriptor  Тип: intptr _t. Дескриптор ответа на транзакцию , может 
использоваться для сле дующих специальных фун кций в  теле 
функции обратного вызова:  
 LPTSTR  ____ stdcall  
TRANS 2QUIK _TRANSACTION _REPLY _CLASS _CODE  
(intptr _t transReplyDescriptor ) – возвращает код 
класса, по  которому подана транзакция ; 
 LPTSTR  ____ stdcall  
TRANS 2QUIK _TRANSACTION _REPLY _SEC_CODE  
(intptr _t transReplyDescriptor ) – возвращает код 
инструмента , по которо му выставлена транзакция ; 
 double  ____ stdcall  
TRANS2QUIK_TRANSACTION_REPLY_PRICE  
(intptr _t transReplyDescriptor ) – возвращает  цену 
сделки ; 
 __int64  ____ stdcall  
TRANS2QUIK_TRANSACT ION_REPLY_QUANTITY  
(intptr _t transReplyDescriptor ) – возвращает  
количество ; 
 __int64  ____ stdcall  
TRANS2QUIK_TRANSACTION_REPLY_BALANCE  
(intptr _t transReplyDescriptor ) – возвращает  остаток ; 
 LPTSTR  ____stdcall 
TRANS2QUIK_TRANSACTION_REPLY_FIRMID  
(intptr _t transReplyDescriptor ) – возвращает  код 
фирмы ; 
 LPTSTR  __stdcall 
TRANS2QUIK_TRANSACTION_REPLY_ACCOUNT  
(intptr _t transReplyDescriptor ) – возвращает  
торговый  счет; 
 LPTSTR  __stdcall 
TRANS2QUIK_TRANSACTION_REPLY_CLIENT_CODE  
(intptr _t transReplyDescriptor ) – возвраща ет код 
клиента ; 
 LPTSTR  __stdcall 
TRANS2QUIK_TRANSACTION_REPLY_BROKERREF  
(intptr _t transReplyDescriptor ) – возвращает  
комментарий ; 
 LPTSTR  __stdcall 
TRANS2QUIK_TRANSACTION_REPLY_EXCHANGE_CO
DE (intptr _t transReplyDescriptor ) – возвращает  
биржевой  номер  заявки  
 

 
 
 53 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.10.14  Функция  TRANS2QUIK_SET_TRANSACTIONS_REPLY_CALLBACK  
Устанавливает функцию обратного вызова для получения информации об отправленной 
асинхронной транзакции.  
long __stdcall TRANS2QUIK_SET_TRANSACTIONS_REPLY_CALLBACK 
(TRANS2QUIK_TRANSACTION_REPLY_CALLBACK  pfTransactionReplyCallback, 
long*  nTransactionExtendedErrorCode , LPSTR  lpstrErrorMessage, 
DWORD  dwErrorMessageSize)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие зн ачения:  
 TRANS2QUIK_SUCCESS – функция обратного вызова 
установлена,  
 TRANS2QUIK _FAILED – функцию обратного вызова установить 
не удалось . В этом случае в переменную 
nTransactionExtendedErrorCode  может передаваться 
дополнительный код ошибки  
TRANS2QUIK_TRANSACTI
ON_REPLY_CALLBACK  Тип: указатель на функцию. Указываетс я ссылка на функцию, которая 
будет обр абатывать информацию об отправленной транзакции  
nTransactionExtendedError
Code Тип: указатель на переменную типа Long. В случае возникновения ошибки 
может содержать расширенный код ошибки  
lpstrErrorMessage  Тип: указат ель на переменную типа Строка. В случае возникновения 
ошибки может получать сообщение о возникшей ошибке  
dwErrorMessageSize  Тип: Long. Содержит длину строки, на которую ссылается указатель 
lpstrErrorMessage  
6.10.15  Функция  TRANS 2QUIK _ORDER _STATUS _CALLBACK  
Функци я обратного вызова для получения информации о п араметрах заявки.  
void _stdcall TRANS2QUIK_ORDER_STATUS_CALLBACK (long  nMode, 
DWORD  dwTransID, unsigned __int64  dNumber, LPSTR  lpstrClassCode, 
LPSTR  lpstrSecCode, double  dPrice, __int64  nBalance, double  dValue,  long nIsSell, 
long nStatus, intptr_t  nOrderDescriptor)  
Параметр  Описание  
nMode  Тип: Long. Признак того, идет ли начальное получение заявок или нет, возможные 
значения: «0» – новая заявка, «1»  – идет начальное получение заявок, «2» – 
получена последняя за явка из начальной рассылки  
dwTransID  Тип: Long. TransID транзакции, породившей заявку. Имеет значение «0», если заявка  
не была порождена транзакцией из файла, либо если TransID н еизвестен  
dNumber  Тип: unsigned __int64 . Номер заявки  

 
 
 54 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
lpstrClassCode  Тип: ук азатель на переменную типа Строка. Код класса  
lpstrSecCode  Тип: указатель на переменную типа Строка. Код инструмента  
dPrice  Тип: Double . Цена заявки  
nBalance  Тип: __int64. Неисполненный о статок заявки  
dValue  Тип: Double . Объем заявки  
nIsSell  Тип: Long. Направление заявки: « 0» еcли «Покупка», иначе «Продажа»  
nStatus  Тип: Long. Состояние исполнения заявки: Значение « 1» соответствует состоянию 
«Активна», «2»  – «Снята», иначе «Исполнена»  
nOrder Descriptor  Тип: intptr _t. Дескриптор заявки, может использова ться для следующих 
специальных фун кций в  теле функции обратного вызова:  
 __int64 __stdcall  TRANS 2QUIK _ORDER _QTY (intptr _t 
nOrderDescriptor ) – возвращает количество з аявки;  
 long __stdcall TRANS2QUIK_ORDER_DATE  (intptr_t  
nOrderDescriptor)  – возвращает  дату заявки; 
 long __stdcall TRANS2QUIK_ORDER_TIME (intptr_t  
nOrderDescriptor)  – возвращает  время  заявки; 
 long __stdcall TRANS2QUIK_ORDER_ACTIVATION_TIME 
(intptr_t  nOrderDescriptor)  – возвращает  время  активации  заявки ; 
 long __stdcall TRANS2QUIK_ORDER_WITHDRAW_TIME  
(intptr_t  nOrderDescriptor)  – возвращает  время  снятия  заявки ; 
 long __stdcall TRANS2QUIK_ORDER_EXPIRY (intptr_t  
nOrderDescriptor)  – возвращает  дату окончания  срока  действия 
заявки ; 
 double  __stdcall TRANS2QUIK_ORDER_ACCRUED_INT (intptr_t  
nOrderDescriptor)  – возвращает  накопленный  купонный  доход  
заявки ; 
 double  __stdcall TRANS2QUIK_ORDER_YIELD (intptr_t  
nOrderDescriptor)  – возвращает  доходность  заявки; 
 LPSTR  __stdcall TRANS2QUIK_ORDER_USERID  (intptr_t  
nOrderDescriptor)  – возвращает  строковый  идентиф икатор  трейдера, 
от имени  которого  отправлена  заявка ; 
 long __stdcall TRANS2QUIK_ORDER_UID (intptr_t  
nOrderDescriptor)  – возвращает  UserID пользователя , указа нный 
в заявке ; 
 LPSTR  __stdcall TRANS2QUIK_ORDER_ACCOUNT  (intptr_t  
nOrderDescriptor)  – возвращает  торговый  счет, указанный  в заявке ; 
 LPSTR  __stdcall TRANS2QUIK_ORDER_BROKERREF (intptr_t  
nOrderDescriptor)  – возвращает  комментарий  заявки; 
 LPSTR  __stdcall TRANS2QUIK_ORDER_CLIENT_CODE (intptr_t  
nOrderDescriptor)  – возвращает  код клиента , отправи вшего заявку ; 
 LPSTR  __stdcall TRANS2QUIK_ORDER_FIRMID (intptr_t  
nOrderDescriptor)  – возвращает  строковый  идентиф икатор  
организации  пользователя , отправившего  заявку ; 
 __int64  __stdcall TRANS2QUIK_ORDER_VISIBLE_QTY  (intptr_t  
nOrderDescriptor ) – возвращает  видимое  количество  для заявок типа 
«Айсберг »; 
 long __stdcall TRANS2QUIK_ORDER_PERIOD  (intptr_t  
nOrderDescriptor)  – возвращает  период , когда  была выставлена  
заявка , возможные  значения :  
 «0» – «Открытие»,  
 «1» – «Нормальный»,  
 «2» – «Закрытие»;  
 FILETIME  __stdcall TRANS 2QUIK _ORDER _FILETIME  

 
 
 55 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
(intptr _t nOrderDescriptor ) – возвращает дату и  время выставл ения 
заявки в формате YY.MM.DD HH:MM:SS.MS; 
 FILETIME  __stdcall 
TRANS 2QUIK _ORDER _WITHDRAW _FILETIME  (intptr _t 
nOrderDescriptor ) – возвращает дату и время снятия заявки в 
формате YY.MM.DD HH:MM:SS.MS; 
 long __stdcall TRANS 2QUIK _ORDER _DATE _TIME  (intptr _t 
nOrderDescriptor , long nTimeType ) – возвращает вр еменные 
параметры заявки в зависимости от значения параметра nTimeType. 
Параметр nTimeType м ожет принимать следующие значения : 
 «0» – функция возвр ащает дату выставл ения заявки в формате 
YYYYMMDD,  
 «1» – функция возвращает время в ыставления заявки в формате 
HHMMSS,  
 «2» – функция возвращает микросекунды времени выставления 
заявки, целое число от 0 до 999999,  
 «3» – функция возвращает дату снятия заявки в формате 
YYYYMMDD,  
 «4» – функция возвращает время снятия заявки в форм ате 
HHMMSS,  
 «5» – функция возвращает микросекунды времени снятия заявки, 
целое число от 0 до 999999  
 long __stdcall TRANS2QUIK_ORDER_VALUE_ENTRY_TYPE 
(intptr_t nOrderDescriptor) – возвра щает способ указания объема 
заявки; возможные значения: «0» – не определен, «1» – количество, 
«2» – объем;  
 long __stdcall TRANS2QUIK_ORDER_EXTENDED_FLAGS 
(intptr_t nOrderDescriptor)  – возвращает  расширенные  флаги  заявки ; 
 __int64  __stdcall TRANS2QUIK_ORDER_ MIN_QTY (intptr_t 
nOrderDescriptor)  – возвращает  минимально  допустимое  количество ; 
«0» – ограничение  не задано ; 
 long __stdcall TRANS2QUIK_ORDER_EXEC_TYPE (intptr_t 
nOrderDescriptor) – возвращает  тип исполнения  заявки ; «0» – 
значение  не задано ; 
 double  __std call TRANS2QUIK_ORDER_AWG_PRICE (intptr_t 
nOrderDescriptor) – возвращает  среднюю  цену приобретения при 
частичном исполнении заявки;  
 LPTSTR  __stdcall TRANS2QUIK_ORDER_REJECT_REASON (intptr_t 
nOrderDescriptor) – возвращает причину отклонения заявки брокером  
 
6.10.16  Функция  TRANS2QUIK_TRADE_STATUS_CALLBACK  
Функция обратного вызова для получения информации о сделке.  
long __stdcall TRANS2QUIK_TRADE_STATUS_CALLBACK (long  nMode, 
unsigned __int64  dNumber, unsigned __int64  dOrderNum, LPSTR  lpstrClassCode, 
LPSTR  lpstrSecCode , double  dPrice, __int64  nQty, double  dValue, long  nIsSell, 
intptr_t  nTradeDescriptor)  
Параметр  Описание  
nMode  Тип: Long. П ризнак того, идет ли начальное получение сделок или нет, 
возмо жные значения: «0» – новая сделка, «1»  – идет начальное получение сдел ок, 

 
 
 56 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
«2» – получена последняя сде лка из начальной рассылки;  
dNumber  Тип: unsigned __int64 . Номер сделки  
dOrderNum  Тип: unsigned __int64. Номер заявки, породившей сделку  
lpstrClassCode  Тип: указатель на переменную типа Строка. Код класса  
lpstrSecCode  Тип: указатель на переменную типа Строка. Код инструмента  
dPrice  Тип: Double . Цена сделки  
nQty Тип: __int64 . Количество сделки  
nIsSell  Тип: Long. Направление сделки: « 0» еcли «Покупка», иначе «Пр одажа»  
dValue  Тип: Double . Объем сделки;  
nTradeDescriptor  Тип: intptr_t . Дескриптор сделки, может использоваться для следующих 
специал ьных функций в функции обратного вызова:  
 long __stdcall TRANS 2QUIK _TRADE _DATE  (intptr _t 
nTradeDescriptor ) – возвращает дату заключения сде лки; 
 long __stdcall TRANS2QUIK_TRADE_SETTLE_D ATE (intptr_t  
nTradeDescriptor)  – возвращает  дату расчетов  по сделке ; 
 long __stdcall TRANS2QUIK_TRADE_TIME (intptr_t  
nTradeDescriptor)  – возвращает  время  сделки; 
 long __stdcall TRANS2QUIK_TRADE_IS_MARGINAL (intptr_t  
nTradeDescriptor)  – возвращает  признак  маржинальн ости сделки : 
«0» еcли «немаржинальная », иначе  «маржинальная »; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_CURRENCY  (intptr_t  
nTradeDescriptor)  – возвращает  валюту  в которой  торгуется 
инструмент  сделки ; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_SETTLE_CURRENCY  
(intptr _t nTradeDescriptor)  – возвращает  валюту  расчетов  по 
сделке ; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_SETTLE_CODE  (intptr_t  
nTradeDescriptor)  – возвращает  код расчетов по сделке ; 
 double  __stdcall TRANS2QUIK_TRADE_ACCRUED_INT (intptr_t  
nTradeDescriptor)  – возвращае т накопленный  купонный  доход  
сделки ; 
 double  __stdcall TRANS2QUIK_TRADE_YIELD (intptr_t  
nTradeDescriptor)  – возвращает  доходность  сделки ; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_USERID  (intptr_t  
nTradeDescriptor)  – возвращает  строковый  идент ификатор  
трейдера , от имени которого  заключена  сделка ; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_ACCOUNT  (intptr_t  
nTradeDescriptor)  – возвращает  торговый счет сделки ; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_BROKERREF  (intptr_t  
nTradeDescriptor)  – возвращает  коммент арий сделки ; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_CLIENT_CODE  (intptr_t  
nTradeDescriptor)  – возвращает  код клиента  сделки; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_FIRMID  (intptr_t  
nTradeDescriptor)  – возвращает  строковый  идент ификатор  
организации  пользователя  сделки ; 
 LPSTR  __stdcall TRANS2QUIK_T RADE_PARTNER_FIRMID  
(intptr_t  nTradeDescriptor)  – возвращает  строковый  
идент ификатор  организации -партнера  по сделке ; 
 double  __stdcall TRANS2QUIK_TRADE_TS_COMMISSION  
(intptr_t  nTradeDescriptor)  – возвращает  величину  сумма рной 

 
 
 57 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
комиссии  по сделке ; 
 double  __stdcall 
TRANS2QUIK_TRADE_CLEARING_CENTER_COMMISSION  
(intptr_t  nTradeDescriptor)  – возвращает  величину комиссии   за 
клиринг  по сделке ; 
 double  __stdcall 
TRANS2QUIK_TRADE_EXCHANGE_COMMISSION  (intptr_t  
nTradeDescriptor)  – возвращает  величину  комиссии  за торги  по 
сделке ; 
 double  __stdcall 
TRANS2QUIK_TRADE_TRADING_SYSTEM_COMMISSION  (intptr_t  
nTradeDescriptor)  – возвращает  величину комиссии  за технический  
доступ  по сделке ; 
 double  __stdcall TRANS2QUIK_TRADE_PRICE2  (intptr_t  
nTradeDescriptor)  – возвращает  цену выкупа; 
 double  __stdcall TRANS2QUIK_TRADE_REPO_RATE  (intptr_t  
nTradeDescriptor)  – возвращает  ставку  РЕПО  в проце нтах; 
 double  __stdcall TRANS2QUIK_TRADE_REPO_VALUE  (intptr_t  
nTradeDescriptor)  – возвращает  сумму  РЕПО  (сумма  
привлеченных /предоставленных  по сделке  РЕПО денежных  средств ); 
 double  __stdcall TRANS2QUIK_TRADE_REPO2_VALUE  (intptr_t  
nTradeDescriptor)  – возвращает  стоимость  выкупа  РЕПО ; 
 double  __stdcall TRANS2QUIK_TRADE_ACCRUED_INT2 
(intptr_t  nTradeDescriptor)  – возвращает  накопленный  купонный  
доход  при выкупе ; 
 long __stdcall TRANS2QUIK_TRADE_REPO_TERM  (intptr_t  
nTradeDescriptor)  – возвращает  срок РЕПО  в календа рных днях; 
 double  __stdcall TRANS2QUIK_TRADE_START_DISCOUNT  
(intptr_t  nTradeDescriptor)  – возвращ ает начальный  дисконт  в 
процентах ; 
 double  __stdcall TRANS2QUIK_TRADE_LOWER_DISCOUNT  
(intptr_t  nTradeDescriptor)  – возвращает  нижний  предел  дисконта  
в процентах ; 
 double  __stdcall TRANS2QUIK_TRADE_UPPER_DISCOUNT  
(intptr_t  nTradeDescriptor)  – возвр ащает верхний  предел  дисконта  
в процентах ; 
 LPSTR  __stdcall TRANS2Q UIK_TRADE_EXCHANGE_CODE 
(intptr_t  nTradeDescriptor)  – возвращает  строковый  код биржи; 
 LPSTR  __stdcall TRANS2QUIK_TRADE_STATION_ID  (intptr_t  
nTradeDescriptor)  – возвращает  строковый  идентифик атор рабочей  
станции ; 
 long __stdcall TRANS2QUIK_TRADE_BLOCK_SECURI TIES  
(intptr_t  nTradeDescriptor)  – возвращает  признак  блокиро вки 
финансового  инструмента  на специальном  счете  на время  операции  
РЕПО : «0»  – еcли «не блокировать », иначе  «блокир овать»; 
 long __stdcall TRANS 2QUIK _TRADE _PERIOD  (intptr _t 
nTradeDescriptor ) – возвращает период, когда была совершена 
сделка; возможные значения: «0»  – «Открытие», «1»  – 
«Нормальный», «2»  – «Закрытие»;  
 FILETIME  __stdcall TRANS 2QUIK _TRADE _FILETIME  
(intptr _t nTradeDescriptor ) – возвращает дату и  время з аключения 
сделки в формате YY.MM.DD HH:MM:SS.MS; 
 long __stdcall TRANS 2QUIK _TRADE _DATE _TIME  (intptr _t 
nTradeDescriptor , long nTimeType ) – возвращает временные 
параметры сделки  в зависимости от значения параметра nTimeType . 
Параметр nTimeType  может принимать следующие значения:  
 «0» – функция возвращает дату заключения сделки в формате 
YYYYMMDD,  
 «1» – функция возвращает время заключения сделки в формате 
HHMMSS,  
 «2» – функция возвращает микросекунды времени заключения 

 
 
 58 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Описание  
сделки, целое число от 0 до 999999  
 long __stdcall TRANS2QUIK_TRADE_KIND ( intpt r_t 
nTradeDescriptor)  – возвращает  вид сделки . Возможные значения:  
 «1» – Обычная,  
 «2» – Адресная,  
 «3» – Первичное ра змещение,  
 «4» – Перевод д енег / инструментов , 
 «5» – Адресная сделка первой части РЕПО,  
 «6» – Расчетная по операции своп,  
 «7» – Расчетная по внебиржевой опер ации своп,  
 «8» – Расчетная сделка бивалютной корз ины, 
 «9» – Расчетная внебиржевая сделка бивалю тной корзины  
 double  __stdcall TRANS2QUIK_TRADE_BROKER_COMMISSION 
(intptr_t  nTradeDescriptor)  – возвращ ает сумму  комиссии  брокера ; 
 long __stdcall TRANS2QUIK_TRADE_TRANSID (intptr_t  
nTradeDescriptor)  – возвращает  TRANS_ID заявки , породившей  
сделку  
 
6.10.17  Функция TRANS2QUIK_ SUBSCRIBE _ORDERS  
Функция служит для создания списка классов и инструментов для подписки на получение 
заявок по ним.  
long __stdcall TRANS2QUIK_SUBSCRIBE_ORDERS (LPSTR  lpstrClassCode, 
LPSTR  lpstrSeccodes)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие значения:  
 TRANS 2QUIK_DLL_NOT_CONNECTED  – не установлена связь 
библиотеки Trans 2QUIK.dll с терминалом QUIK. В этом случае 
подписка на заявки не возможна,  
 TRANS 2QUIK_QUIK_NOT_CONNECTED  – не установлена связь между 
Рабочим местом QUIK  и сервером. В этом случае подписка на заявки 
не возможна,  
 TRANS 2QUIK_SUCCESS  – подписка проведена успешно,  
 TRANS 2QUIK_FAILED – попытка подписки завершилась неуспешно  
lpstrClassCode  Тип: указатель на переменную типа Строка. Код класса, для которого будут 
заказ аны заявки, если в качестве обоих входных параметров указаны пустые 
строки, то  это означает, что заказано получ ение заявок  по всем доступным 
инструментам  
lpstrSeccodes  Тип: указатель на переменную типа Строка. Список кодов инструментов , 
разделенных символом «|», по которым будут зак азаны заявки. Если в качестве 
значения указана пустая строка, то это означает, что заказано по лучение заявок по 
классу, указанн ому в параметре lpstrClassCode  
 

 
 
 59 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.10.18  Функция TRANS2QUIK_ SUBSCRIBE _TRADES  
Функция служит для создания списка классов и инструментов для подписки на получение 
сделок по ним.  
long __stdcall TRANS2QUIK_SUBSCRIBE_TRADES (LPSTR  lpstrClassCode, 
LPSTR  lpstrSeccodes)  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие значения:  
 TRANS 2QUIK_DLL_NOT_CONNECTED  – не установлена связь 
библиотеки Trans 2QUIK.dll с терминалом QUIK. В этом случае 
подписка на заявки н е возможна,  
 TRANS 2QUIK_QUIK_NOT_CONNECTED  – не установлена связь между 
Рабочим местом QUIK  и сервером. В этом случае подписка на заявки 
не возможна,  
 TRANS 2QUIK_SUCCESS  – подписка проведена успешно,  
 TRANS 2QUIK_FAILED  – попытка подписки завершилась неуспеш но 
lpstrClassCode  Тип: указатель на переменную типа Строка. Код класса, для которого будут 
заказ аны сделки, если в качестве обоих входных параметров указаны пустые 
строки, то  это означает, что заказано получ ение сделок по всем доступным 
инструментам  
lpstrSeccodes  Тип: указатель на переменную типа Строка. Список кодов инструментов , 
разделенных символом «|», по которым будут зак азаны сделки. Если в качестве 
значения указана пустая строка, то это означает, что заказано получение сделок 
по классу, указа нному в параметре lpstrClassCode . 
 
6.10.19  Функция TRANS2QUIK_ START _ORDERS  
Функция запускает процесс получения заявок по классам и инструментам, определенных 
функцией TRANS2QUIK_SUBSCRIBE_ORDERS . 
void __stdcall TRANS2QUIK_START_ORDERS 
(TRANS2QUIK_ORDER_STATUS_CALLBACK  pfnOrderStatusCallback)  
Параметр  Описание  
TRANS2QUIK_ ORDER _STATUS_CALLBAC
K Указатель на пользовательскую функцию обратного вызова 
для получения информации о зая вках. 
 
6.10.20  Функция TRANS2QUIK_ START _TRADES  
Функция запускает процесс получения сделок с параметрам и, установленными функцией 
TRANS 2QUIK _SUBSCRIBE _TRADES . 

 
 
 60 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 void __stdcall TRANS2QUIK_START_TRADES 
(TRANS2QUIK_TRADE_STATUS_CALLBACK  pfnTradesStatusCallback)  
Параметр  Описание  
TRANS2QUIK_TRADE_STATUS_CALLBAC
K Указатель на пользовательскую функцию обратного вы зова 
для получения инфо рмации о сделках.  
 
6.10.21  Функция TRANS2QUIK_UNSUBSCRIBE_ORDERS  
Функция прерывает работу функции TRANS2QUIK_S TART _ORDERS  и производит очистку 
списка получаемых инструментов, сформированного функцией 
TRANS2QUIK_SUBSCRIBE_ORDERS . 
long __stdc all TRANS2QUIK_UNSUBSCRIBE_ORDERS ()  
Параметр  Описание  
Result  Тип: Long. Возвращаемое число может принимать следующие значения:  
 TRANS 2QUIK_DLL_NOT_CONNECTED  – не установлена связь 
библиотеки Trans 2QUIK.dll с терминалом QUIK. Операция не 
возможна,  
 TRANS 2QUIK_QUIK_NOT_CONNECTED  – не установлена связь 
между Раб очим местом QUIK и сервером. Операция не 
возможна,  
 TRANS 2QUIK_SUCCESS  – операция проведена успешно,  
 TRANS 2QUIK_FAILED  – попытка завершилась неуспешно  
 
6.10.22  Функция TRANS2QUIK_UNSUBSCRIBE_TRADES  
Функция п рерывает работу функции TRANS 2QUIK _START _TRADES  и производит очистку 
списка получаемых инструментов, сформированного функцией 
TRANS 2QUIK _SUBSCRIBE _TRADES . 
long __stdcall TRANS2QUIK_UNSUBSCRIBE_ TRADES  () 
Параметр  Описание  
Result  Тип: Long. Возвращаемое чис ло может принимать следующие значения:  
 TRANS 2QUIK_DLL_NOT_CONNECTED  – не установлена связь 
библиотеки Trans 2QUIK.dll с терминалом QUIK. Операция не 
возможна,  
 TRANS 2QUIK_QUIK_NOT_CONNECTED  – не установлена связь 
между Раб очим местом QUIK и сервером. Операц ия не 
возможна,  
 TRANS 2QUIK_SUCCESS  – операция проведена успешно,  
 TRANS 2QUIK_FAILED – попытка завершилась неуспешно  
 

 
 
 61 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.10.23  Получение информации о заявках и сделках  
Для получения информации о заявках и сделках пользователь сначала должен 
сформировать список пол учаемых инструментов. Для этого он должен вызывать 
соответствующие функции подпи ски TRANS 2QUIK _SUBSCRIBE_ORDERS  для заявок и 
TRANS 2QUIK _SUBSCRIBE_TRADES  для сделок.  
Список инструментов как по сделкам, так и по заявкам можно формировать двумя способами  
– подписываться сразу на весь перечень классов и инструментов, на которые есть права у 
пользователя, либо перечислять классы по очереди. Например, если требуется получить 
информ ацию только по двум классам TQNL  и TQBR, причем по TQBR классу интересуют 
заявки то лько по инстр ументу LKOH, то подписка должна быть произведена следующим 
образом:  
TRANS2QUIK_SUBSCRIBE_ORDERS (“ TQNL”, “”); 
TRANS2QUIK_SUBSCRIBE_ORDERS (“ TQBR”, “LKOH”);  
 
Для перечисления нескольких инструментов в классе используется символ «|», например:  
TRANS2QUIK_SUBSCRIBE_ORDERS (“ TQBR”, “LKOH|AFLT”);  
 
Перечисление классов инструментов  через разделитель «|» не допускается.  
Если при вызове функции подписки указан перечень инструментов, который уже имеется 
в списке, то такой вызов будет проигнорирован, нап ример:  
TRANS2QUIK_SUBSCRIBE_ORDERS (“”, “”);  
TRANS2QUIK_SUBSCRIBE_ORDERS (“ TQBR”, “LKOH”);  
 
Сначала была заказана подписка на получение заявок по всем доступным классам 
и инстр ументам, а затем сделана попытка подписаться на получение информации по одному 
конкретному классу. Этот вызов будет проигнорирован, так как он не добавл яет новых 
инструментов в  список для получения заявок. Аналогичный результат будет в следующем 
случае: 
TRANS2QUIK_SUBSCRIBE _ORDERS (“TQBR”, “”); 
TRANS2QUIK_SUBSCRIBE_ORDERS (“ TQBR”, “LKOH|AFLT”);  
 
Для запуска процесса получения информации по сделкам и заявкам пользователь должен 
вызвать функции TRANS2QUIK_START_ORDERS  – для заявок 
и TRANS2QUIK_START_TRADES  – для сд елок.  

 
 
 62 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 После вызова данных функций, терминал QUIK начнет передавать в Tran s2QUIK.dll  
информ ацию о заявках и сделках с помощью указанных функций обратного вызова, причем 
сначала б удет передана информация об уже полученных заявках и сделках (параметр 
nMode  в функциях обратного вызова будет отличен от нуля), а потом по мере поступл ения 
будет передаваться информация о новых заявках и сделках (параметр nMode  в функциях 
обратного вызова будет равен н улю). 
Для прекращения получения информации по заявкам или сделкам пользователь должен 
вызывать соответствующие функции отписки TRANS 2QUIK _UNSUBSCRIBE_ORDERS  – для 
заявок и  TRANS 2QUIK _UNSUBSCRIBE_TRADES  – для сделок. Данные функции 
параметров не имеют, после их вызова прекращается получение информации по всем 
заявкам и сделкам. Допускаются мн огократные вызовы данной функции в процессе работы,  
наряду с вызовами для  подписки на п олучение информации по сделкам и заявкам. 
Например : 
TRANS2QUIK_SUBSCRIBE_ORDERS (“”, “”);  
TRANS2QUIK_START_ORDERS ();  
TRANS2QUIK_SUBSCRIBE_TRADES (“”, “”);  
TRANS2QUIK_START_TRADES ();  
… 
TRANS2QUIK_UNSUBSCRIBE_ORDERS ();  
TRANS2QUIK_UNSUBSCRIBE_TRADES ();  
TRANS2QUIK_SUBSCRIBE_ORDERS (“ TQBR”, “LKOH”);  
TRANS2QUIK_START_ORDERS ();  
TRANS2QUIK_SUBSCRIBE_TRADES (“ TQBR”, “LKOH”);  
TRANS2QUIK_START_TRADES ();  
 

 
 
 63 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 6.11  ПРИЛОЖЕНИ Е 
6.11.1  Форматы данных для настройки экспорта через ODBC  
Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Таблица текущих торгов  
Инструмент [К
ласс]* VARCHAR(200)   Цена закр.  DECIMAL(15,6
)  Страйк  DECIMAL(15,6
) 
Инструмент  VARCHAR(150)   Пред. оц. DECIMAL(15,6
)  Ст. шага цены  DECIMAL(15,6
) 
Инструмент 
сокр.  VARCHAR(20)   Размещ ение VARCHAR(32)   Расч.цена  DECIMAL(15,6
) 
Код 
инструмента  VARCHAR(12)   НКД DECIMAL(15, 8
)  Кол-во послед.  INTEGER  
ISIN VARCHAR(15)   Доходность  DECIMAL(15,6
)  Изм. к пр.расч.  DECIMAL(15,6
) 
Рег.номер  VARCHAR( 30)  Размер купона  DECIMAL(15,6
)  Пред.расч.цен.  DECIMAL(15,6
) 
Класс  VARCHAR(128)   Доход. пред. оц.  DECIMAL(15,6
)  Лим.изм.цены  DECIMAL(15,6
) 
Код класса  VARCHAR(12)   Доход. оц.  DECIMAL(15,6
)  Лим.изм.цен T+1  DECIMAL(15,6
) 
Дата торгов  VARCHAR(15)   Изм. к пред. оц.  DECIMAL(15,6
)  Лим.акт.заяв. DECIMAL( 15,6
) 
Погашение  VARCHAR(15)   Закр. DECIMAL(15,6
)  Оборот внес.  DECIMAL(15,0
) 
До погашения  INTEGER   Доход. закр.  DECIMAL(15,6
)  Кол.внес.сдел.  INTEGER  
Номинал  DECIMAL(15, 6)  % измен. закр.  DECIMAL(15,6
)  Знач. DECIMAL(15,6
) 
Валюта  VARCHAR(4)   Вч.рын.цен а DECIMAL(15,6
)  Закр. DECIMAL(15,6
) 
Точность  INTEGER   Рын. цена  DECIMAL(15,6
)  Время закр.  VARCHAR(15)  
Шаг цены  DECIMAL(15,6)   Рын. цена 2  DECIMAL(15,6
)  Знач.при откр.  DECIMAL(15,6
) 

 
 
 64 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Статус  VARCHAR(32)   Призн .котир . DECIMAL(15,6
)  Изм. к откр.  DECIMAL( 15,6
) 
Лот INTEGER   Дата выпл.куп.  VARCHAR(15)   Изм. к закр.  DECIMAL(15,6
) 
Сессия  VARCHAR(32)   Длит.куп. INTEGER   Спрос сессии  DECIMAL(1 9,0
) 
Тип VARCHAR(12)   Оферта  DECIMAL(15,6
)  Предл. сессии  DECIMAL(1 9,0
) 
Спрос  DECIMAL(15,6)   Дата оферты  VARCHAR(15)   Пред.цена закр.  DECIMAL(1 9,6
) 
Кол. спрос  INTEGER   Объем обр.  INTEGER   Ставка  DECIMAL(15, 6
) 
Общ.спрос  INTEGER   Дата посл. торг.  VARCHAR(15)   Тип цены  VARCHAR(16)  
Заявки куп.  INTEGER   Дюрация  DECIMAL(15, 6
)  Статус кл.  VARCHAR(16)  
Предл.  DECIMAL(15,6)   Оф.цена откр.  DECIMAL(15,6
)  Кот.клиринга  DECIMAL(15,6
) 
Кол. предл.  INTEGER   Оф.тек.цена  DECIMAL(15,6
)  Начало  VARCHAR(15)  
Общ. предл.  INTEGER   Оф.цена закр.  DECIMAL(15,6
)  Окончание  VARCHAR(15)  
Заявки прод  INTEGER   Тип цены  VARCHAR(128)   Начало веч.  VARCHAR(15)  
Откр.  DECIMAL(15,6)   Тренд  DECIMAL(15,6
)  Окончание веч.  VARCHAR(15)  
Макс. цена  DECIMAL(15,6)   Призн.кот.пред.  DECIMAL(1 9,6
)  Начало утр.  VARCHAR(15)  
Мин. цена  DECIMAL(15,6)   Кол-во отк.поз.  INTEGER   Окончание утр.  VARCHAR(15)  
Цена послед.  DECIMAL(15,6)   Макс. возм. цен.  DECIMAL(15,6
)  Валюта шага цены  VARCHAR(16)  
Измен. к 
закр.  DECIMAL(15,6)   Мин. возм. цен.  DECIMAL(15,6
)  Рын котир.  DECIMAL(15,6
) 
Кол-во 
послед.  INTEGER   ГО покупателя  DECIMAL(15,6
)  Марж . VARCHAR(16)  
Время 
послед.  VARCHAR(1 5)  ГО продавца  DECIMAL(15,6
)  Дата исп.  VARCHAR(15)  

 
 
 65 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Общ кол -во INTEGER   Время изм.  VARCHAR(15)   Ст. шага цены кл  DECIMAL(15,6
) 
Оборот  DECIMAL(15,0)   БГОП  DECIMAL(15,6
)  Ст. шага цены пр  DECIMAL(15,6
) 
Оборот посл.  DECIMAL(15,6)   БГОНП  DECIMAL(15,6
)  Вр. изм.м.т.ц.  VARCHAR(15)  
Ср. взв. цена  DECIMAL(15,6)   Тип опциона  VARCHAR(16)   Пред. Лот  INTEGER  
Лучш . спрос  DECIMAL(15,6)   Баз.актив  VARCHAR(13)   Дата изм.лота  VARCHAR(15)  
Лучш. пред  DECIMAL(15,6)   Волатильность  DECIMAL(15,6
)  Дата расч. доход  VARCHAR(1 5) 
Кол-во 
сделок  INTEGER   Теор.цена DECIMAL(15, 6
)  Баз. курс  DECIMAL(19,4
) 
CFI-код 
инструмента  VARCHAR(12)   Наличие 
спроса/предложе
ния АКП  VARCHAR( 8)    
Таблица «Клиентский портфель»  
Фирма  VARCHAR(1 2)  Тек.плечо  DECIMAL( 20,6
)  На покупку  DECIMAL( 20,
6) 
Код клиента  VARCHAR(1 2)  Ур.маржи  DECIMAL( 20,6
)  На продажу  DECIMAL( 20,
6) 
ПовышУрРиска  VARCHAR(1 2)  Тек.лимит  DECIMAL( 20,6
)  НаПокупНеМаржин  DECIMAL( 20,
6) 
Тип клиента  VARCHAR( 3)  ДостТекЛимит  DECIMAL( 20,6
)  НаПокупОбесп  DECIMAL( 20,
6) 
Сроч. счет  VARCHAR (12)  БлокПокупка  DECIMAL( 20,6
)  ГО поз.  DECIMAL( 20,
6) 
Вход.активы  DECIMAL( 20,6)  БлокПок МО  DECIMAL( 20,6
)  ГО заяв.  DECIMAL( 20,
6) 
Плечо  DECIMAL( 20,6)  БлокПок О  DECIMAL( 20,6
)  Вариац. маржа  DECIMAL( 20,
6) 
Вход.лимит  DECIMAL( 20,6)  БлокПродажа  DECIMAL( 20,6
)  Активы/ГО  DECIMAL( 20,
6) 
Шорты  DECIMAL( 20,6)  БлокПокНеМарж  DECIMAL( 20,6
)  Сумма ден. 
остатков  DECIMAL( 20,
6) 
Лонги  DECIMAL( 20,6)  ВходСредства  DECIMAL( 20,6
)  Суммарно заблок.  DECIMAL( 20,
6) 

 
 
 66 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Лонги МО  DECIMAL( 20,6)  ТекСредства  DECIMAL( 20,6
)  Парам. ра сч. VARCHAR(1 0) 
Лонги О  DECIMAL( 20,6)  Прибыль/убытки  DECIMAL( 20,6
)  Шорты (нетто)  DECIMAL( 20,
6) 
Стоимость 
портфеля  DECIMAL( 20,6)  ПроцИзмен  DECIMAL(15, 8
)  Лонги (нетто)  DECIMAL( 20,
6) 
Срок расчётов  VARCHAR(5)   Мин.маржа  DECIMAL( 20,6
)  Нач.маржа  DECIMAL( 20,
6) 
Скор.маржа  DECIMAL( 20,6)  Статус  VARCHAR(12)   Требование  DECIMAL( 20,
6) 
УДС DECIMAL( 20,6)  Сумма дисконтов  DECIMAL( 20,6
)  ТекАктБезДиск  DECIMAL( 20,
6) 
Статус счета  DECIMAL( 20,6)  ЛимОткрПозНачДня  DECIMAL( 20,6
)  ЛимОткрПоз  DECIMAL( 20,
6) 
ПланЧистПоз  DECIMAL( 20,6)  ТекЧистПоз  DECIMAL( 20,6
)  НакопВарМаржа  DECIMAL( 20,
6) 
ВарМаржаПром
клир.  DECIMAL( 20,6)  НакопДоход  DECIMAL( 20,6
)  ЛиквСтоимОпцио  
нов DECIMAL( 20,
6) 
СумАктивовНаС
рчРынке  DECIMAL( 20,6)  ПолнСтоимПортфе  
ля DECIMAL( 20,6
)  ТекЗадолжНаСрч  
Рынке  DECIMAL( 20,
6) 
Дост. Средств  DECIMAL( 20,6)  Дост. Средств 
(ОткрПоз)  DECIMAL( 20,6
)  КоэффЛикв ГО  DECIMAL( 20,
6) 
Ожид. 
КоэффЛикв ГО  DECIMAL( 20,6)  Cash Leverage  DECIMAL( 20,6
)  ТипПозНаСрчРын  
ке VARCHAR(12)  
Таблица обезличенных сделок  
Номер сделки  DECIMAL( 19,0)  Код инструмента  VARCHAR(12)   Доходность  DECIMAL(15,6
) 
Дата торгов  VARCHAR(20)   Класс  VARCHAR(130)   Купонный доход  DECIMAL(15,2
) 
Дата VARCHAR(20)   Код класса   VARCHAR(12)    Ставка РЕПО (%)  DECIMAL(15,6
) 
Время  VARCHAR(15)   Цена DECIMAL(15,6
)  Сумма  РЕПО  DECIMAL(15,2
) 
Время(мкс)  INTEGER   Количество  INTEGER   Объем выкупа 
РЕПО  DECIMAL(15, 8
) 

 
 
 67 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Период  VARCHAR(20)   Объем  DECIMAL(1 9,8
)  Срок РЕПО  INTEGER  
Инструмент 
сокр.  VARCHAR(20)   Операция  VARCHAR(12)   Открытый интерес  DECIMAL(15,0)  
Инструмент  VARCHAR (150)   Код расчетов  VARCHAR(5)   Код биржи  VARCHAR(64)  
Таблица заявок  
Номер  DECIMAL( 19,0)  Счет VARCHAR(12)   Состояние  VARCHAR(10)  
Код биржи  VARCHAR(64)   Цена DECIMAL(15,6
)  ID транзакции  INTEGER  
Дата торгов  VARCHAR(20)   Количество  INTEGER   Код расче тов VARCHAR(12)  
Дата VARCHAR(20)   Видимое кол -во DECIMAL(19,0
)  Цена выкупа  DECIMAL(15,6
) 
Выставлена 
(время)  VARCHAR(10)   Остаток  INTEGER   Заявка маркет -
мейкера  VARCHAR(3)  
Выставлена  
(мкс)  INTEGER   Объем  DECIMAL(15, 8
)  Идентификатор 
счета  VARCHAR(12)  
Период  VARCHAR(20)   Валюта  VARCHAR(4)   Ввод объема  VARCHAR(16)  
Время 
активации  VARCHAR(10)   Доходность  DECIMAL(15,6
)  Срок РЕПО  INTEGER  
Дата снятия  VARCHAR(20)   Купонный 
процент  DECIMAL(15,2
)  Сумма РЕПО  DECIMAL(15, 8
) 
Снята (время)  VARCHAR(10)   Трейдер  VARCHAR(12)   Объем выкупа 
РЕПО  DECIMAL(15, 8
) 
Снята(мкс)  INTEGER   Дилер  VARCHAR(12)   Остаток суммы 
РЕПО  DECIMAL(15, 8
) 
Инструмент 
сокр.  VARCHAR(20)   UID INTEGER   Начальный 
дисконт (%)  DECIMAL(15,6
) 
Инструмент  VARCHAR(150)   Код клиента  VARCHAR(20)   Причина 
отклонения  VARCHAR(128)  
Код 
инструмента  VARCHAR(12)   Комментарий  VARCHAR(20)   Режим 
исполнения  VARCHAR(64)  
Класс  VARCHAR(130)   Исходный номер  DECIMAL( 19,0
)  Мин. допустимое 
кол-во INTEGER  
Код класса  VARCHAR(12)   Срок VARCHAR(15)   Стоп-заявка  DECIMAL( 19,0) 

 
 
 68 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Операция  VARCHAR(10)   Тип VARCHAR(10)   Время окончания 
срока  VARCHAR(8)  
Средневзвеш
енная цена 
приобретения  DECIMAL(15,6)   UID снявшего 
заявку  DECIMAL(15,0)   Расширенный 
статус  VARCHAR(16)  
Кол-во 
базовой 
валюты  DECIMAL(15,6)   Кол-во 
котируемой 
валюты DECIMAL(15,6)     
Базовая 
валюта  VARCHAR(16)   Котируемая 
валюта  VARCHAR(16)     
Таблица стоп -заявок  
Номер  DECIMAL( 19,0)  Направление 
стоп-цены  VARCHAR(3)   Активна с  VARCHAR(1 2) 
Дата VARCHAR(10)   Стоп-цена DECIMAL(15,6
)  Активна по  VARCHAR(1 2) 
Время VARCHAR(1 2)  Направление 
стоп-лимит цены  VARCHAR(3)   Тип VARCHAR( 4) 
Время снятия  VARCHAR(10)   Стоп-лимит цена  DECIMAL(15,6
)  Состояние  VARCHAR(1 2) 
Тип стоп -
заявки  VARCHAR(128)   Цена DECIMAL(15,6
)  Результат  VARCHAR( 64) 
Описание 
типа стоп -
заявки  VARC HAR(128)   Стоп-лимит по 
рыночной  VARCHAR(2 )  Связ. заявка  DECIMAL(1 9,0
) 
Инструмент 
сокр.  VARCHAR(16)   Кол-во DECIMAL(15,0
)  Цена связ.заявки  DECIMAL(15,6
) 
Инструмент  VARCHAR(128)   Акт.кол -во DECIMAL(15,0
)  ID транзакции  DECIMAL(15,0
) 
Код 
инструмента  VARCHAR(12)   Исп.кол -во DECIMAL(15,0
)  Отступ от 
min/max  DECIMAL(15,6
) 
Класс  VARCHAR(128)   Дилер  VARCHAR(12)   Единицы отступа  VARCHAR(1)  
Код класса  VARCHAR(12)   UID DECIMAL(15,0
)  Защитный спр ед DECIMAL(15,6
) 
Операция  VARCHAR(8)   Код клиента  VARCHAR(128)   Единицы спр еда VARCHAR(1)  
Счет VARCHAR(12)   Комментарий  VARCHAR(2 0)  Тейк-профит по 
рыночной  VARCHAR(3)  

 
 
 69 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Инструмент 
стоп-цены  VARCHAR(128)   Номер заявки  DECIMAL( 19,0
)  Заявка условия  DECIMAL( 19,0
) 
Код 
инструмента  
стоп-цены  VARCHAR(12)   Сделка услов ия DECIMAL(15,0
)  Сервер  VARCHAR(1 2) 
Класс стоп -
цены  VARCHAR(128)   Срок VARCHAR(10)   Дата снятия  VARCHAR(10)  
Код класса 
стоп-цены  VARCHAR(12)   Время действия  VARCHAR(3)   UID снявшего 
заявку  DECIMAL(15,0
) 
Таблица сделок  
Номер  DECIMAL( 19,0)  Объем  DECIMAL(15, 8
)  Комиссия ТС  DECIMAL(15, 8
) 
Код биржи  VARCHAR(68)   Валюта  VARCHAR(4)   Клиринговая 
комиссия  DECIMAL(15,6
) 
Дата торгов  VARCHAR(20)   Валюта расчетов  VARCHAR(4)   ФБ комиссия  DECIMAL(15,6
) 
Дата расчетов  VARCHAR(10)   Код расчетов  VARCHAR(5)   ТЦ коми ссия DECIMAL(15,6
) 
Время  VARCHAR(15)   Доходность  DECIMAL(15,6
)  Доход(%) на дату 
выкупа  DECIMAL(15,6
) 
Заявка  DECIMAL( 19,0)  Купонный 
процент  DECIMAL(15, 8
)  Сумма РЕПО  DECIMAL(15, 8
) 
Инструмент 
сокр.  VARCHAR(20)   Трейдер  VARCHAR(12)   Объем выкупа 
РЕПО  DECIMAL(15, 8
) 
Инструмент  VARCHAR(150)   Идентификатор 
рабочей станции  VARCHAR(36)   Срок РЕПО  INTEGER
  
Код 
инструмента  VARCHAR(12)   Дилер  VARCHAR(12)   Начальный 
дисконт(%)  DECIMAL(15,6
) 
Класс  VARCHAR(130)   Орг-я трейдера  VARCHAR(128)   Нижний 
дисконт(%)  DECIMAL(15,6
) 
Код класса  VARCHAR(12)   Код клиента  VARCHAR(20)   Верхний 
дисконт(%)  DECIMAL(15,6
) 
Тип сделки  VARCHAR(12)   Комментарий  VARCHAR(20)   Блокировка 
обеспечения  VARCHAR(3)  
Операция  VARCHAR(10)   Партнер  VARCHAR(12)   Дата сделки  VARCHAR(20)  
Счет VARC HAR(12)   Организация 
партнера  VARCHAR(129)   Вид сделки  VARCHAR(64)  

 
 
 70 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Цена DECIMAL(15,6)   Период  VARCHAR(20)   Идентификатор 
счета  VARCHAR(12)  
Время (мкс)  INTEGER   Цена выкупа  DECIMAL(15,6
)  Исходный номер  DECIMAL( 19,0) 
Количество  INTEGER   Ставка РЕПО (%)  DECIMAL(15,6
)  Айсберг -заявка  VARCHAR(4)  
Валюта 
расчетов  VARCHAR(4)   ID транзакции  DECIMAL(15,0)   Снята(мкс)  VARCHAR(8)  
Комиссия 
брокера  DECIMAL(15,6)   UID отказав  
шегося от сделки  DECIMAL(15,0)   Системная ссылка  VARCHAR(15)  
Фирма 
клиринга  VARCHAR(18)   Дата снятия  VARCHAR(10)   Статус  VARCHAR(15)  
Счет 
клиринга  VARCHAR(18)   Снята(время)  VARCHAR(8)   Приоритетное 
обеспечение  VARCHAR(15)  
Кол-во 
базовой 
валюты  DECIMAL(15,6)   Кол-во 
котируемой 
валюты  DECIMAL(15,6)     
Базовая 
валюта  VARCHAR(16)   Котируемая 
валюта  VARCHAR(16)     
Таблица «Позиции по деньгам » 
Фирма  VARCHAR(12)   Входящий остаток  DECIMAL(15,6
)  Всего  DECIMAL(15,6
) 
Валюта  VARCHAR(5)   Входящий лимит  DECIMAL(15,6
)  Доступно  DECIMAL(15,6
) 
Код позиции  VARCHAR(5)   Текущий остаток  DECIMAL(15,6
)  Баланс DECIMAL(15,6
) 
Код клиента  VARCHAR(12)   Текущий лимит  DECIMAL(15,6
)    
Срок 
расчётов  VARCHAR(5)   Заблокировано  DECIMAL(15,6
)    
Таблица «Позиции по инструментам»  
Фирма  VARCHAR(12)   Входящий остаток  INTEGER   Доступно  INTEGER  
Название 
инструмента  VARC HAR(150)   Входящий лимит  INTEGER   Баланс  INTEGER  
Код 
инструмента  VARCHAR(12)   Текущий остаток  INTEGER   Цена 
приобретения  DECIMAL(15,6
) 

 
 
 71 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Счет депо  VARCHAR(12)   Текущий лимит  INTEGER   Заблокировано на 
покупку  DECIMAL(15,6
) 
Код клиента  VARCHAR(12)   Заблокир овано  INTEGER     
Срок 
расчётов  VARCHAR(5)   Всего  INTEGER     
Таблица позиций по клиентским счетам (фьючерсы)  
Фирма  VARCHAR(12)   Вход.чист.поз.  INTEGER   План чист. поз.  DECIMAL(15,6
) 
Торговый 
счет VARCHAR(12)   Тек.длин.поз.  INTEGER   Вариац маржа  DECIMAL( 15,6
) 
Код 
инструмента  VARCHAR(12)   Тек.кор.поз.  INTEGER   Эффективная 
цена позиций  DECIMAL(15,6
) 
Краткое 
название  VARCHAR(150)   Тек.чист.поз.  INTEGER   Суммарная 
в.маржа  DECIMAL(15,2
) 
Тип  VARCHAR(35)   Акт. покупка  INTEGER   Реальная в.маржа  DECIMAL(15,2
) 
Вход. длин. 
поз. INTEGER   Стоимость 
позиций  DECIMAL(19,4
)    
Дата 
погашения  VARCHAR(20)   Акт. продажа  INTEGER     
Вход. кор. 
поз. INTEGER   Оценка тек. 
чист.поз.  DECIMAL(15,6
)    
Таблица ограничений по клиентским счетам (фьючерсы)  
Фирма  VARCHAR(12)   Лимит открытых 
позиций  DECIMAL(15,6
)  Тек. чист. поз. 
(под заявки)  DECIMAL(19,4
) 
Торговый 
счет VARCHAR(12)   Текущие чистые 
позиции  DECIMAL(15,6
)  Тек. чист. поз. 
(под открытые 
позиции)  DECIMAL(19,4
) 
Тип лимита  VARCHAR(20)   Планируемые 
чистые позиции  DECIMAL (15,6
)  Коэфф. кл -го ГО  DECIMAL(19,6
) 
Коэфф. 
ликвидности  DECIMAL(15,6)   Биржевые сборы  DECIMAL(19,4
)  Валюта позиции  VARCHAR(4)  
Премия по 
опционам  DECIMAL(19,4)   Вариационная 
маржа по 
позициям  DECIMAL(15,6
)  Реальная в.маржа  DECIMAL(15,2
) 

 
 
 72 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Предыдущий 
лимит 
открытых 
позиций  DECIMAL(15,6)   Накопленный 
доход  DECIMAL(15,6
)    
Таблица котировок  
Доходность 
покупки  DECIMAL(15,6)   Цена покупки  DECIMAL(15,6
)  Сумма лучшей 
продажи  INTEGER  
Сумма 
лучшей 
покупки  INTEGER   Цена продажи  DECIMAL(15,6
)  Доходность 
прода жи DECIMAL(15,6
) 
Своя покупка  INTEGER   Продажа  INTEGER     
Покупка  INTEGER   Своя продажа  INTEGER     
Таблица заявок -отчетов на сделки РП C 
Номер  DECIMAL( 19,0)  Трейдер  VARCHAR(12)   Кол-во INTEGER  
Дата VARCHAR(10)   Дилер  VARCHAR(12)   Объем  DECIMAL(15, 8) 
Выставлен(вр
емя) VARCHAR(8)   Орг-я трейдера  VARCHAR(128)   Комиссия  DECIMAL(15,6)  
Снят(время)  VARCHAR(8)   Счет депо  VARCHAR(12)   Направленность  VARCHAR(32)  
Класс  VARCHAR(128)   Партнер  VARCHAR(12)   Состояние  VARCHAR(32)  
Инструмент 
coкр.  VARCHAR(16)   Орг-я партнера  VARCHAR(128)   Тип отчета  VARCHAR(32)  
Инструмент  VARCHAR(128)   Счет депо 
партнера  VARCHAR(12)   Вид отчета  VARCHAR(32)  
Сумма 
отступного  DECIMAL(15,6)   Направлен  
ность отступно  
го VARCHAR(12)     
Таблица «Сделки для исполнения»  
Номер  DECIMAL( 19,0)  Состояние  VARCHAR(32)   Верхний 
дисконт(%)  DECIMAL(15,6)  
Номер заявки  DECIMAL( 19,0)  Купонный %  DECIMAL(15, 8
)  Блокировать 
обеспечение  VARCHAR(3)  
Дата торгов  VARCHAR(10)   Цена 1ой части 
РЕПО  DECIMAL(15,6
)  Исполнить  VARCHAR(3)  
Дата 
исполнения  VARCHAR(10)   Цена выкупа  DECIMAL(15,6
)  Исполнить завтра  VARCHAR(3)  

 
 
 73 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Класс  VARCHAR(128)   Номер сделки 1ой 
части РЕПО  DECIMAL(1 9,0
)  Тип VARCHAR(50)  
Инструмент 
сокр.  VARCHAR(16)   Ставка РЕПО(%)  DECIMAL(15,6
)  Направленность  VARCHAR(12)  
Инструмент  VARCHA R(128)   Код расчетов  VARCHAR(12)   Дисконт после 
взноса(%)  DECIMAL(15,6)  
Операция  VARCHAR(12)   Отчет  DECIMAL(15,0
)  Количество после 
взноса  INTEGER  
Код клиента  VARCHAR(128)   Отчет партнера  DECIMAL(15,0
)  Сумма РЕПО после 
взноса  DECIMAL(15, 8) 
Комментарий  VARCHAR(128)   Комиссия ТС  DECIMAL(15,6
)  Стоимость выкупа 
после взноса  DECIMAL(15, 8) 
Дилер  VARCHAR(12)   Остаток  INTEGER   Сумма возврата 
после взноса  DECIMAL(15, 8) 
Орг-я 
трейдера  VARCHAR(128)   Время 
исполнения  VARCHAR(10)   Дата заключения  VARCHAR(10)  
Счет депо  VARCHAR(12)   Сумма 
обязательства  DECIMAL(15, 8
)  Состояние 
расчетов  VARCHAR(32)  
Партнер  VARCHAR(12)   Сумма РЕПО  DECIMAL(15, 8
)  Тип клиринга  VARCHAR(32)  
Орг-я 
партнера  VARCHAR(128)   Срок РЕПО  INTEGER   Комиссия за отчет  DECIMAL(15,6)  
Счет депо 
партн ера VARCHAR(12)   Объем выкупа 
РЕПО  DECIMAL(15, 8
)  Купонная выплата  DECIMAL(15,6)  
Цена DECIMAL(15,6)   Сумма возврата 
РЕПО  DECIMAL(15, 8
)  Дата купонной 
выплаты  VARCHAR(10)  
Кол-во INTEGER   Дисконт(%)  DECIMAL(15,6
)  Выплата по 
основному долгу  DECIMAL(15,6)  
Объем  DECIMAL(15, 8)  Нижний 
дисконт(%)  DECIMAL(15,6
)  Подтверждена  VARCHAR(12)  
Дата выплаты 
по основному 
долгу  VARCHAR(10)   Валюта расчетов  VARCHAR(5)   Подтверждена 
контрагентом  VARCHAR(12)  
Номер 
поручения  DECIMAL(15,0)   Время 
подтверждения  VARCHAR(15)   Код позиции  VARCHAR(12)  

 
 
 74 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Кол-во к 
исполнению  DECIMAL(15,0)   Сумма отступного  DECIMAL(15, 6
)    
Расчетная 
организация  VARCHAR(1 2)  Номер витринной 
сделки  DECIMAL( 19,0
)    
Таблица обязательств и требований по активам  
Фирма  VARCHAR(12)   Код класса  VARCHA R(12)   Количество в 
заявках на 
продажу  DECIMAL(15,0
) 
Код 
инструмента  VARCHAR(12)   Класс  VARCHAR(128)   Сумма в сделках  DECIMAL(15,2
) 
Торговый 
счет VARCHAR(12)   Счет депо  VARCHAR(12)   Сумма в заявках 
на покупку  DECIMAL(15,2
) 
Дата расчетов  VARCHAR(10)   Код позиции  VARCHAR(12)   Сумма в заявках 
на продажу  DECIMAL(15,2
) 
Инструмент 
сокр.  VARCHAR(16)   Количество в 
сделках  DECIMAL(15,0
)    
Инструмент  VARCHAR(128)   Количество в 
заявках на 
покупку  DECIMAL(15,0
)    
Таблица обязательств и требований по деньгам  
Фирма VARCHAR(12)   Дата расчетов  VARCHAR(10)   Сумма в заявках 
на покупку  DECIMAL(15,2)  
Код позиции  VARCHAR(12)   Сумма в сделках  DECIMAL(15,2
)  Сумма в заявках 
на продажу  DECIMAL(15,2
) 
Таблица параметров процентных рисков  
Код 
инструмента  VARCHAR(12)   Начал о диапазона  DECIMAL(15,0)   Расчетная ставка 
РЕПО, % DECIMAL(15, 2
) 
Инструмент 
сокр.  VARCHAR(16)   Конец диапазона  DECIMAL(15,0)   Верхняя граница, 
% DECIMAL(15, 2
) 
Инструмент  VARCHAR(128)   Дисконт, %  DECIMAL(15,1)   Начало 
диапазона, руб  DECIMAL(15,2)  
Код кл асса VARCHAR(12)   Нижняя граница, 
руб DECIMAL(15,6
)  Конец диапазона, 
руб DECIMAL(15,2)  
Класс  VARCHAR(128)   Расчетная ставка 
РЕПО, руб  DECIMAL(15,6
)  Диапазон  INTEGER  

 
 
 75 
 
Руководство пользователя QUIK  
Раздел 6: Совместная работа с другими приложениями  
 Параметр  Форм ат Параметр  Формат  Параметр  Формат  
Дата расчетов  VARCHAR(10)   Верхняя граница, 
руб DECIMAL(15,6
)  Нижняя граница, 
% DECIMA L(15, 2
) 
Таблица параметров рыночных рисков  
Код 
инструмента  VARCHAR(12)   Диапазон  INTEGER   Верхняя граница, 
руб DECIMAL(15,6
) 
Инструмент 
сокр.  VARCHAR(16)   Начало диапазона  DECIMAL(15,0)   Начало 
диапазона, руб  DECIMAL(15,2)  
Инструмент  VARCHAR(128)   Конец диапазона  DECIMAL(15,0,
)  Конец диапазона, 
руб DECIMAL(15,2)  
Код класса  VARCHAR(12)   Дисконт, %  DECIMAL(15,1
)    
Класс  VARCHAR(128)   Нижняя граница, 
руб DECIMAL(15,6
)    
Таблица торговых счетов  
Фирма  VARCHAR(12)   Счет депо  VARCHAR(12)   Тип торг. счет а VARCHAR(40)  
Счет VARCHAR(12)   Код позиции  VARCHAR(12)   Тип счета депо  VARCHAR(30)  
Основной 
счет VARCHAR(12)   Описание  VARCHAR(32)   Статус  VARCHAR(20)  
Тип раздела  VARCHAR(1 2)  Расч-я орг -я по 
Т0 VARCHAR(1 5)  Раздел счета Депо  VARCHAR(1 8) 
Запрет 
необес печ-х 
продаж  VARCHAR( 12)  Расч-я орг -я по 
Т+ VARCHAR(1 5)    
 

